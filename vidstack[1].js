import{i as Y,a as pt,S as Z,t as z,u as P,c as J,D as F,C as m,g as Oe,s as nt,o as T,e as h,l as d,b as qe,d as Et,f as H,h as Si,j as Mi,k as p,V as B,m as Vt,E as De,n as v,p as G,r as Ci,q as Ai,v as We,w as Ie,x as W,y as l,z as Li,A as S,B as Fe,F as R,G as gt,H as Oi,I as b,J as C,K as qi,L as Pt,M as Di,N as mt,O as He,P as Q,Q as ft,R as Wi,T as Ne,U as Ii,W as Fi,X as f,Y as g,Z as Hi}from"./chunks/vidstack-469b29f6.js";import{c as Ue,L as w,I as je,a as Ni,b as Rt,A as Ui,d as ji,V as Vi,e as Ri,i as Kt,f as Ki,g as Ve,r as q,h as Bi,j as Qi}from"./chunks/vidstack-54e3e759.js";import{i as L,T as O,a as Bt,p as Qt,g as Gt,b as Gi,f as Xi,o as St,c as Yi}from"./chunks/vidstack-eb5f6f48.js";import{Q as rt,c as Xt}from"./chunks/vidstack-4e718951.js";import{lazyPaths as Re}from"https://cdn.jsdelivr.net/npm/media-icons@next/dist/lazy.js";class Yt{get length(){return this.Xf.length}constructor(t,e){Y(t)?this.Xf=t:!pt(t)&&!pt(e)?this.Xf=[[t,e]]:this.Xf=[]}start(t){return this.Xf[t][0]??1/0}end(t){return this.Xf[t][1]??1/0}}function Ke(n){if(!n.length)return null;let t=n.start(0);for(let e=1;e<n.length;e++){const s=n.start(e);s<t&&(t=s)}return t}function Be(n){if(!n.length)return null;let t=n.end(0);for(let e=1;e<n.length;e++){const s=n.end(e);s>t&&(t=s)}return t}const zt=new Z({audioTracks:[],audioTrack:null,autoplay:!1,autoplayError:null,buffered:new Yt,duration:0,canLoad:!1,canFullscreen:!1,canOrientScreen:Ue(),canPictureInPicture:!1,canPlay:!1,controls:!1,controlsVisible:!1,crossorigin:null,poster:"",currentTime:0,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Yt,playing:!1,playsinline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetVolume:!1,seekable:new Yt,seeking:!1,source:{src:"",type:""},sources:[],started:!1,title:"",textTracks:[],textTrack:null,volume:1,waiting:!1,get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return Ke(this.buffered)??0},get bufferedEnd(){return Be(this.buffered)??0},get seekableStart(){return Ke(this.seekable)??0},get seekableEnd(){return this.canPlay?Be(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoplaying:!1,inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),zi=new Set(["autoplay","canFullscreen","canLoad","canPictureInPicture","canSetVolume","controls","crossorigin","fullscreen","height","logLevel","loop","mediaHeight","mediaWidth","mediaType","muted","orientation","pictureInPicture","playsinline","pointer","poster","preload","providedStreamType","inferredViewType","providedViewType","source","sources","textTrack","textTracks","title","volume","width"]);function Ji(n){zt.reset(n,t=>!zi.has(t)),z()}const Qe=J();function y(){return P(Qe)}class Zi{constructor(t=void 0){this.Ve=null,this.Zf=null,this.$f=-1,this.ag=t}setTarget(t){this.Ve=t}getPlayer(t){return this.Zf?this.Zf:((t??this.Ve)?.dispatchEvent(new F("find-media-player",{detail:e=>void(this.Zf=e),bubbles:!0,composed:!0})),this.Zf)}setPlayer(t){this.Zf=t}startLoading(t){this.Yf("media-start-loading",t)}play(t){this.Yf("media-play-request",t)}pause(t){this.Yf("media-pause-request",t)}mute(t){this.Yf("media-mute-request",t)}unmute(t){this.Yf("media-unmute-request",t)}enterFullscreen(t,e){this.Yf("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.Yf("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.Yf("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.Yf("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.Yf("media-enter-pip-request",t)}exitPictureInPicture(t){this.Yf("media-exit-pip-request",t)}seeking(t,e){this.Yf("media-seeking-request",e,t)}seek(t,e){this.Yf("media-seek-request",e,t)}seekToLiveEdge(t){this.Yf("media-live-edge-request",t)}changeVolume(t,e){this.Yf("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.Yf("media-audio-track-change-request",e,t)}changeQuality(t,e){this.Yf("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.Yf("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.Yf("media-rate-change-request",e,t)}resumeControls(t){this.Yf("media-resume-controls-request",t)}pauseControls(t){this.Yf("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const r=s.indexOf(i);this.changeTextTrackMode(r,"disabled",t)}}toggleCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const r=s.indexOf(i);this.changeTextTrackMode(r,"disabled",t),this.$f=r}else{let r=this.$f;(!s[r]||!L(s[r]))&&(r=-1),r===-1&&(r=s.findIndex(a=>L(a)&&a.default)),r===-1&&(r=s.findIndex(a=>L(a))),r>=0&&this.changeTextTrackMode(r,"showing",t),this.$f=-1}}Yf(t,e,s){const i=new F(t,{bubbles:!0,composed:!0,detail:s,trigger:e});let r=e?.target||null;r&&r instanceof m&&(r=r.el),r=!r||r===document||r===window||r===document.body||this.Zf?.el&&r instanceof Node&&!this.Zf.el.contains(r)?this.Ve??this.getPlayer()?.el:r??this.Ve,this.Zf?this.Zf.canPlayQueue.Db(t,()=>r?.dispatchEvent(i)):r?.dispatchEvent(i)}_f(t){}}function $(n,t,e){n.hasAttribute(t)||n.setAttribute(t,e)}function at(n,t){if(n.hasAttribute("aria-label"))return;function e(){p(n,"aria-label",t())}h(e)}function Ge(n,t,e){for(;t;){if(t===n)return!0;if(e?.(t))break;t=t.parentElement}return!1}function _(n,t){d(n,"pointerup",e=>{e.button===0&&t(e)}),d(n,"keydown",e=>{qe(e)&&t(e)})}function Jt(n){return Et(n)&&(n.touches.length>1||n.changedTouches.length>1)}function ht(n){let t=Oe(),e=window.requestAnimationFrame(()=>{nt(n,t),e=-1});return()=>void window.cancelAnimationFrame(e)}function Xe(n,t,e){let s,i=n,r=n.parentElement,a=n.content.firstElementChild,o=[];!a&&n.firstElementChild&&(n.innerHTML=n.firstElementChild.outerHTML,n.firstElementChild.remove(),a=n.content.firstElementChild);for(let c=0;c<t;c++)s=document.importNode(a,!0),e?.(s,c),r.insertBefore(s,i.nextSibling),o.push(s),i=s;return T(()=>{for(let c=0;c<o.length;c++)o[c].remove()}),o}function Zt(n){const t=document.createElement("template");return t.innerHTML=n,t.content}function _t(n){return n.cloneNode(!0).firstElementChild}function Ye(n,t,e,{offsetVarName:s,xOffset:i,yOffset:r,...a}){if(!n)return;const o=e.replace(" ","-").replace("-center","");if(H(n,"visibility",t?null:"hidden"),!t)return;const c=u=>e.includes("top")?`calc(-1 * ${u})`:u;return Si(t,n,()=>{Mi(t,n,{placement:o,...a}).then(({x:u,y:x})=>{Object.assign(n.style,{top:`calc(${x+"px"} + ${c(r?r+"px":`var(--${s}-y-offset, 0px)`)})`,left:`calc(${u+"px"} + ${i?i+"px":`var(--${s}-x-offset, 0px)`}`})})})}function _i(n){return getComputedStyle(n).animationName!=="none"}class ot extends B{}class tn extends ot{constructor(){super(...arguments),this.eg=-2,this.bg=!1,this.cg=null,this.defaultDelay=2e3}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.fg(),this.bg||this.dg(!0,t,e)}hide(t=this.defaultDelay,e){this.fg(),this.bg||this.dg(!1,t,e)}pause(t){this.bg=!0,this.fg(),this.dg(!0,0,t)}resume(t){this.bg=!1,!this.$state.paused()&&this.dg(!1,this.defaultDelay,t)}onConnect(){h(this.Ub.bind(this));const t=this.ja.bind(this),e=this.oa.bind(this);this.listen("can-play",s=>this.show(0,s)),this.listen("play",t),this.listen("pause",e),this.listen("autoplay-fail",e)}Ub(){const{paused:t,started:e,autoplayError:s}=this.$state;if(t()||s()&&!e())return;const i=this.gg.bind(this);h(()=>{const r=this.$state.pointer(),a=r==="coarse",o=[a?"touchend":"pointerup","keydown"];for(const c of o)d(this.el,c,i,{passive:!1});a||d(this.el,"pointermove",i)})}ja(t){this.show(0,t),this.hide(this.defaultDelay,t)}oa(t){this.show(0,t)}fg(){window.clearTimeout(this.eg),this.eg=-1}gg(t){t.MEDIA_GESTURE||this.bg||Jt(t)||(Vt(t)&&(t.key==="Escape"?(this.el?.focus(),this.cg=null):this.cg&&(t.preventDefault(),requestAnimationFrame(()=>{this.cg?.focus(),this.cg=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}dg(t,e,s){if(e===0){this.Ma(t,s);return}this.eg=window.setTimeout(()=>{this.scope&&this.Ma(t&&!this.bg,s)},e)}Ma(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.cg=document.activeElement,requestAnimationFrame(()=>this.el?.focus())),this.dispatch("controls-change",{detail:t,trigger:e}))}}class en{constructor(){this.priority=0,this.fj=!0,this.n=null,this.ff=null,this.ej=new Set}canRender(){return!0}attach(t){this.n=t,t.textTracks.onchange=this.Ma.bind(this)}addTrack(t){this.ej.add(t),this.hj(t)}removeTrack(t){t[O.Ka]?.remove?.(),t[O.Ka]=null,this.ej.delete(t)}changeTrack(t){const e=t?.[O.Ka];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.ff=t}setDisplay(t){this.fj=t,this.Ma()}detach(){this.n&&(this.n.textTracks.onchange=null);for(const t of this.ej)this.removeTrack(t);this.ej.clear(),this.n=null,this.ff=null}hj(t){var e;if(!this.n)return;const s=t[e=O.Ka]??(t[e]=this.ij(t));s instanceof HTMLElement&&(this.n.append(s),s.track.mode=s.default?"showing":"hidden")}ij(t){const e=document.createElement("track"),s=t.default||t.mode==="showing",i=t.src&&t.type==="vtt";return e.id=t.id,e.src=i?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.gj(t,e.track),e}gj(t,e){if(!(t.src&&t.type==="vtt"||e.cues?.length))for(const s of t.cues)e.addCue(s)}Ma(t){for(const e of this.ej){const s=e[O.Ka]?.track;if(!s)continue;if(!this.fj){s.mode="disabled";continue}const i=s.mode==="showing";i&&this.gj(e,s),e.setMode(i?"showing":"disabled",t)}}}class sn{constructor(t){this.n=null,this.jg=[],this.lg=!1,this.hg=null,this.ig=null,this.g=t;const e=t.textTracks;this.kg=e,h(this.og.bind(this)),T(this.mg.bind(this)),d(e,"add",this.Ja.bind(this)),d(e,"remove",this.pg.bind(this)),d(e,"mode-change",this.Wd.bind(this))}og(){const{$state:t,$iosControls:e}=this.g;this.lg=t.controls()||e(),this.Wd()}add(t){this.jg.push(t),this.Wd()}remove(t){t.detach(),this.jg.splice(this.jg.indexOf(t),1),this.Wd()}j(t){requestAnimationFrame(()=>{if(this.n=t,t){this.hg=new en,this.hg.attach(t);for(const e of this.kg)this.ng(e)}this.Wd()})}ng(t){L(t)&&this.hg?.addTrack(t)}qg(t){L(t)&&this.hg?.removeTrack(t)}Ja(t){this.ng(t.detail)}pg(t){this.qg(t.detail)}Wd(){if(!this.n){this.mg();return}const t=this.kg.selected;if(this.lg||t?.[O.La]){this.ig?.changeTrack(null),this.hg?.setDisplay(!0),this.hg?.changeTrack(t);return}if(this.hg?.setDisplay(!1),this.hg?.changeTrack(null),!t){this.ig?.changeTrack(null);return}const e=this.jg.sort((s,i)=>s.priority-i.priority).find(s=>s.canRender(t));this.ig!==e&&(this.ig?.detach(),e?.attach(this.n),this.ig=e??null),e?.changeTrack(t)}mg(){this.hg?.detach(),this.hg=null,this.ig?.detach(),this.ig=null}}var ze;class Je extends De{constructor(){super(...arguments),this.ug=[],this[ze]=!1}get length(){return this.ug.length}get readonly(){return this[w.eb]}toArray(){return[...this.ug]}[(ze=w.eb,Symbol.iterator)](){return this.ug.values()}[w.C](t,e){const s=this.ug.length;""+s in this||Object.defineProperty(this,s,{get(){return this.ug[s]}}),!this.ug.includes(t)&&(this.ug.push(t),this.dispatchEvent(new F("add",{detail:t,trigger:e})))}[w.Ia](t,e){const s=this.ug.indexOf(t);s>=0&&(this[w.hb]?.(t,e),this.ug.splice(s,1),this.dispatchEvent(new F("remove",{detail:t,trigger:e})))}[w.db](t){for(const e of[...this.ug])this[w.Ia](e,t);this.ug=[],this[w.fb](!1,t),this[w.gb]?.()}[w.fb](t,e){this[w.eb]!==t&&(this[w.eb]=t,this.dispatchEvent(new F("readonly-change",{detail:t,trigger:e})))}}class nn extends Je{constructor(){super(...arguments),this.Va=!1,this.vg={},this.wg=this.xg.bind(this)}get selected(){return this.ug.find(t=>t.mode==="showing"&&L(t))??null}add(t,e){const s=t instanceof Bt,i=s?t:new Bt(t);return this.vg[t.kind]&&t.default&&delete t.default,i.addEventListener("mode-change",this.wg),this[w.C](i,e),i[O.Ta]=this[O.Ta],this.Va&&i[O.Va](),t.default&&(this.vg[t.kind]=i,i.mode="showing"),this}remove(t,e){if(this.ug.includes(t))return t===this.vg[t.kind]&&delete this.vg[t.kind],t.mode="disabled",t[O.G]=null,t.removeEventListener("mode-change",this.wg),this[w.Ia](t,e),this}clear(t){for(const e of[...this.ug])this.remove(e,t);return this}getById(t){return this.ug.find(e=>e.id===t)??null}getByKind(t){const e=Array.isArray(t)?t:[t];return this.ug.filter(s=>e.includes(s.kind))}[O.Va](){if(!this.Va){for(const t of this.ug)t[O.Va]();this.Va=!0}}xg(t){const e=t.detail;if(e.mode==="showing"){const s=L(e)?["captions","subtitles"]:[e.kind];for(const i of this.ug)i.mode==="showing"&&i!=e&&s.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new F("mode-change",{detail:t.detail,trigger:t}))}}const bt=Symbol(0);class Ze extends Je{get selected(){return this.ug.find(t=>t.selected)??null}get selectedIndex(){return this.ug.findIndex(t=>t.selected)}[w.hb](t,e){this[w.B](t,!1,e)}[w.C](t,e){t[bt]=!1,Object.defineProperty(t,"selected",{get(){return this[bt]},set:s=>{this.readonly||(this[w.ib]?.(),this[w.B](t,s))}}),super[w.C](t,e)}[w.B](t,e,s){if(e===t[bt])return;const i=this.selected;t[bt]=e,(e?i!==t:i===t)&&(i&&(i[bt]=!1),this.dispatchEvent(new F("change",{detail:{prev:i,current:this.selected},trigger:s})))}}class rn extends Ze{getById(t){return t===""?null:this.ug.find(e=>e.id===t)??null}}const an=eval,hn=/:\s+'?"?(.*?)'?"?\)/g,on=/\s+not\s+/g,cn=/\s+and\s+/g,ln=/\s+or\s+/g,dn=/(\d)px/g,te=class extends De{constructor(t,e){super(),this.yg=v("true"),this.zg=new Set,this.Ag=v(!0),this.$matches=G(()=>{let s=this.yg();if(s==="never")return!1;for(const i of this.zg){const r=this.Cg[i](),a=W(r)?`'${r}'`:r+"";s=s.replace(Ie(i),a)}return an(`!!(${s})`)&&this.Ag()}),this.Bg=e,this.Cg=t,Ci(s=>{h(this.qb.bind(this)),h(this.Eg.bind(this)),this.Dg=s})}get query(){return Ai(this.Bg)}get matches(){return this.$matches()}qb(){const t=this.query;if(t==="")return;if(t==="never"){this.yg.set(t);return}const e=t.trim().split(/\s*,\s*/g),s=e.filter(r=>r.startsWith("@media")).join(","),i=e.filter(r=>!r.startsWith("@media"));if(s.length){const r=window.matchMedia(s.replace(/@media\s/g,"")),a=()=>void this.Ag.set(r.matches);a(),d(r,"change",a)}if(i.length){const r=this.Fg(i),a=Object.keys(zt.record);for(const o of r.matchAll(/\(([-a-zA-Z]+)\s/g)){const c=We(o[1]);a.includes(c)&&this.zg.add(c)}this.yg.set(r)}return()=>{this.zg.clear(),this.yg.set("true"),this.Ag.set(!0)}}Eg(){this.$matches(),this.dispatchEvent(new Event("change"))}Fg(t){return t.map(e=>"("+e.replace(hn,' == "$1")').replace(on,"!").replace(cn," && ").replace(ln," || ").replace(dn,"$1").trim()+")").join(" || ")}destroy(){this.Dg()}};te.create=n=>{const t=y();return new te(t.$state,n)};let Mt=te;class un extends Ze{constructor(){super(...arguments),this.Gg=!1,this.switch="current"}get auto(){return this.Gg||this.readonly}[w.ib](){this[rt.H](!1)}[w.gb](t){this[rt.H](!1,t)}autoSelect(t){this.readonly||this.Gg||!this[rt.v]||(this[rt.v]?.(),this[rt.H](!0,t))}[rt.H](t,e){this.Gg!==t&&(this.Gg=t,this.dispatchEvent(new F("auto-change",{detail:t,trigger:e})))}}function pn(n){return n instanceof HTMLAudioElement}function gn(n){return n instanceof HTMLVideoElement}function mn(n){return pn(n)||gn(n)}const fn={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},_e=new Set(["Shift","Alt","Meta","Control"]),bn='button, [role="button"]',ts='input, textarea, select, [contenteditable], [role^="menuitem"]';class yn extends ot{constructor(t){super(),this.Hg=null,this.g=t}onConnect(){h(this.Lg.bind(this))}Lg(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s=e()==="player"?this.el:document,i=v(!1);s===this.el?(this.listen("focusin",()=>i.set(!0)),this.listen("focusout",r=>{this.el.contains(r.target)||i.set(!1)})):(l(i)||i.set(document.querySelector("[data-media-player]")===this.el),d(document,"focusin",r=>{const a=r.composedPath().find(o=>o instanceof Element&&o.localName==="media-player");a!==void 0&&i.set(this.el===a)})),h(()=>{i()&&(d(s,"keyup",this.Mg.bind(this)),d(s,"keydown",this.Ng.bind(this)),d(s,"keydown",this.Og.bind(this),{capture:!0}))})}Mg(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(ts))return;let{method:s,value:i}=this.Jg(t);if(!W(i)&&!Y(i)){i?.callback(t);return}s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.Hg?(this.Kg(t,s==="seekForward"),this.Hg=null):(this.g.remote.seek(this.Ig,t),this.Ig=void 0)),s?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}Ng(t){if(!t.key||_e.has(t.key))return;const e=document.activeElement;if(e?.matches(ts)||qe(t)&&e?.matches(bn))return;let{method:s,value:i}=this.Jg(t);if(!W(i)&&!Y(i)){i?.callback(t);return}if(!s&&!t.metaKey&&/[0-9]/.test(t.key)){t.preventDefault(),t.stopPropagation(),this.g.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(s)switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.Cd(t,s,s==="seekForward");break;case"volumeUp":case"volumeDown":const r=this.el.querySelector("[data-media-volume-slider]");if(r)r.dispatchEvent(new KeyboardEvent("keydown",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const o=t.shiftKey?.1:.05;this.g.remote.changeVolume(this.$state.volume()+(s==="volumeUp"?+o:-o),t)}break;case"toggleFullscreen":this.g.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const a=this.$state.playbackRate();this.g.remote.changePlaybackRate(Math.max(.25,Math.min(2,a+(s==="speedUp"?.25:-.25))),t);break;default:this.g.remote[s]?.(t)}}Og(t){mn(t.target)&&this.Jg(t).method&&t.preventDefault()}Jg(t){const e={...this.$props.keyShortcuts(),...this.g.ariaKeys},s=Object.keys(e).find(i=>{const r=e[i],a=Y(r)?r.join(" "):W(r)?r:r?.keys;return(Y(a)?a:a?.split(" "))?.some(o=>$n(o).replace(/Control/g,"Ctrl").split("+").every(c=>_e.has(c)?t[c.toLowerCase()+"Key"]:t.key===c.replace("Space"," ")))});return{method:s,value:s?e[s]:null}}Pg(t,e){const s=t.shiftKey?10:5;return this.Ig=Math.max(0,Math.min((this.Ig??this.$state.currentTime())+(e==="seekForward"?+s:-s),this.$state.duration()))}Kg(t,e){this.Hg?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}Cd(t,e,s){this.$state.canSeek()&&(this.Hg||(this.Hg=this.el.querySelector("[data-media-time-slider]")),this.Hg?this.Kg(t,s):this.g.remote.seeking(this.Pg(t,e),t))}}const vn=["!","@","#","$","%","^","&","*","(",")"];function $n(n){return n.replace(/Shift\+(\d)/g,(t,e)=>vn[e-1])}class Tn extends B{constructor(t){super(),this.Qg=t}onAttach(t){const{$props:e,ariaKeys:s}=y(),i=t.getAttribute("aria-keyshortcuts");if(i){s[this.Qg]=i,T(()=>{delete s[this.Qg]});return}const r=e.keyShortcuts()[this.Qg];if(r){const a=Y(r)?r.join(" "):W(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",Y(a)?a.join(" "):a)}}}const ee=Symbol(0),wn=["autoplay","autoplayError","canFullscreen","canPictureInPicture","canLoad","canPlay","canSeek","ended","fullscreen","loop","live","liveEdge","mediaType","muted","paused","pictureInPicture","playing","playsinline","seeking","started","streamType","viewType","waiting"],kn={autoplay:!1,controls:!1,currentTime:0,crossorigin:null,fullscreenOrientation:"landscape",load:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",controlsDelay:2e3,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:fn,title:""};class xn extends ot{constructor(t){super(),this.N=t}async onAttach(t){const e=this.$props.load();if(e==="eager")requestAnimationFrame(this.N);else if(e==="idle")Li(this.N);else if(e==="visible"){const s=new IntersectionObserver(i=>{this.scope&&i[0].isIntersecting&&(s.disconnect(),this.N())});return s.observe(t),s.disconnect.bind(s)}}}class En{constructor(t,e){this.bc=t,this.g=e}f(t,...e){this.bc(new F(t,e?.[0]))}async ya(t,e){const{$state:s,logger:i}=this.g;l(s.canPlay)||(this.f("can-play",{detail:t,trigger:e}),z(),s.canPlay()&&s.autoplay()&&!s.started()&&await this.Sg(e))}async Sg(t){const{player:e,$state:s}=this.g;s.autoplaying.set(!0);const i=new F("autoplay-attempt",{trigger:t});try{await e.play(i)}catch{}}}var I={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},es=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],ss=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],is=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],D=typeof window<"u"&&typeof window.document<"u"?window.document:{},N="fullscreenEnabled"in D&&Object.keys(I)||es[0]in D&&es||ss[0]in D&&ss||is[0]in D&&is||[],Pn={requestFullscreen:function(n){return n[N[I.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[N[I.requestFullscreen]]},get exitFullscreen(){return D[N[I.exitFullscreen]].bind(D)},get fullscreenPseudoClass(){return":"+N[I.fullscreen]},addEventListener:function(n,t,e){return D.addEventListener(N[I[n]],t,e)},removeEventListener:function(n,t,e){return D.removeEventListener(N[I[n]],t,e)},get fullscreenEnabled(){return!!D[N[I.fullscreenEnabled]]},set fullscreenEnabled(n){},get fullscreenElement(){return D[N[I.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return D[("on"+N[I.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return D[("on"+N[I.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return D[("on"+N[I.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return D[("on"+N[I.fullscreenerror]).toLowerCase()]=n}},tt=Pn;const Ct=tt.fullscreenEnabled;class Sn extends B{constructor(){super(...arguments),this.Oh=!1,this.Ph=!1}get active(){return this.Ph}get supported(){return Ct}onConnect(){d(tt,"fullscreenchange",this.ch.bind(this)),d(tt,"fullscreenerror",this.ah.bind(this)),T(this.cf.bind(this))}async cf(){Ct&&await this.exit()}ch(t){const e=se(this.el);e!==this.Ph&&(e||(this.Oh=!1),this.Ph=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}ah(t){this.Oh&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.Oh=!1)}async enter(){try{return this.Oh=!0,!this.el||se(this.el)?void 0:(ns(),tt.requestFullscreen(this.el))}catch(t){throw this.Oh=!1,t}}async exit(){if(!(!this.el||!se(this.el)))return ns(),tt.exitFullscreen()}}function Mn(){return Ct}function se(n){if(tt.fullscreenElement===n)return!0;try{return n.matches(tt.fullscreenPseudoClass)}catch{return!1}}function ns(){if(!Ct)throw Error("[vidstack] no fullscreen API")}const rs=class xi extends B{constructor(){super(...arguments),this.xb=v(this.$h()),this.Zh=v(!1)}get type(){return this.xb()}get locked(){return this.Zh()}get portrait(){return this.xb().startsWith("portrait")}get landscape(){return this.xb().startsWith("landscape")}get supported(){return xi.supported}onConnect(){if(this.supported)d(screen.orientation,"change",this.ai.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.ai.bind(this),T(()=>t.onchange=null)}T(this.cf.bind(this))}async cf(){this.supported&&this.Zh()&&await this.unlock()}ai(t){this.xb.set(this.$h()),this.dispatch("orientation-change",{detail:{orientation:l(this.xb),lock:this._h},trigger:t})}async lock(t){l(this.Zh)||this._h===t||(this.bi(),await screen.orientation.lock(t),this.Zh.set(!0),this._h=t)}async unlock(){l(this.Zh)&&(this.bi(),this._h=void 0,await screen.orientation.unlock(),this.Zh.set(!1))}bi(){if(!this.supported)throw Error("[vidstack] no orientation API")}$h(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};rs.supported=Ue();let as=rs;class Cn{constructor(){this.Ug=new Map}Db(t,e){this.Ug.has(t)||this.Ug.set(t,new Set),this.Ug.get(t).add(e)}Dh(t,e){const s=this.Ug.get(t);if(s)for(const i of s)e(i);this.Ug.delete(t)}Yg(t){this.Ug.delete(t)}gi(t){return this.Ug.get(t)?.size??0}db(){this.Ug.clear()}}class An{constructor(){this.Cd=!1,this.Zg=!1,this.Wg=!1,this.Ug=new Cn}}class Ln extends ot{constructor(t,e,s){super(),this.Xg=!1,this.Eb=t,this.Tg=e,this.g=s,this.W=s.$provider,this.cc=new tn,this.Vg=new Sn,this.$c=new as}onAttach(){this.listen("fullscreen-change",this.ch.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.dh.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);h(this.eh.bind(this)),h(this.fh.bind(this)),h(this.gh.bind(this))}dh(t){t.stopPropagation(),l(this.W)&&this[t.type]?.(t)}async $b(t){const{canPlay:e,paused:s,ended:i,autoplaying:r,seekableStart:a}=this.$state;if(l(s)){if(t?.type!=="media-play-request"){this.dispatchEvent(this.createEvent("media-play-request",{trigger:t}));return}this.Tg.Ug.Db("play",t);try{const o=l(this.W);return ie(o,l(e)),l(i)&&(o.currentTime=a()+.1),await o.play()}catch(o){const c=this.createEvent("play-fail",{detail:Xt(o),trigger:t});throw c.autoplay=r(),this.Eb.bc(c),o}}}async _b(t){const{canPlay:e,paused:s}=this.$state;if(l(s))return;if(t?.type!=="media-pause-request"){this.dispatchEvent(this.createEvent("media-pause-request",{trigger:t}));return}this.Tg.Ug.Db("pause",t);const i=l(this.W);return ie(i,l(e)),i.pause()}hc(t){const{canPlay:e,live:s,liveEdge:i,canSeek:r,liveSyncPosition:a,seekableEnd:o,userBehindLiveEdge:c}=this.$state;if(c.set(!1),l(()=>!s()||i()||!r()))return;const u=l(this.W);ie(u,l(e)),u.currentTime=a()??o()-2}async dc(t="prefer-media",e){const s=this._g(t);if(hs(t,s),!s.active){if(l(this.$state.pictureInPicture)&&(this.Xg=!0,await this.gc(e)),e?.type!=="media-enter-fullscreen-request"){this.dispatchEvent(this.createEvent("media-enter-fullscreen-request",{detail:t,trigger:e}));return}return this.Tg.Ug.Db("fullscreen",e),s.enter()}}async ec(t="prefer-media",e){const s=this._g(t);if(hs(t,s),!!s.active){if(e?.type!=="media-exit-fullscreen-request"){this.dispatchEvent(this.createEvent("media-exit-fullscreen-request",{detail:t,trigger:e}));return}try{this.Tg.Ug.Db("fullscreen",e);const i=await s.exit();return this.Xg&&l(this.$state.canPictureInPicture)&&await this.fc(),i}finally{this.Xg=!1}}}_g(t){const e=l(this.W);return t==="prefer-media"&&this.Vg.supported||t==="media"?this.Vg:e?.fullscreen}async fc(t){if(this.$g(),!this.$state.pictureInPicture()){if(t?.type!=="media-enter-pip-request"){this.dispatchEvent(this.createEvent("media-enter-pip-request",{trigger:t}));return}return this.Tg.Ug.Db("pip",t),await this.W().pictureInPicture.enter()}}async gc(t){if(this.$g(),!!this.$state.pictureInPicture()){if(t?.type!=="media-exit-pip-request"){this.dispatchEvent(this.createEvent("media-exit-pip-request",{trigger:t}));return}return this.Tg.Ug.Db("pip",t),await this.W().pictureInPicture.exit()}}$g(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}eh(){this.cc.defaultDelay=this.$props.controlsDelay()}fh(){const{canLoad:t,canFullscreen:e}=this.$state,s=this.Vg.supported||this.W()?.fullscreen?.supported||!1;t()&&l(e)===s||e.set(s)}gh(){const{canLoad:t,canPictureInPicture:e}=this.$state,s=this.W()?.pictureInPicture?.supported||!1;t()&&l(e)===s||e.set(s)}"media-audio-track-change-request"(t){if(this.g.audioTracks.readonly)return;const e=t.detail,s=this.g.audioTracks[e];s&&(this.Tg.Ug.Db("audioTrack",t),s.selected=!0)}async"media-enter-fullscreen-request"(t){try{await this.dc(t.detail,t)}catch(e){this.ah(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.ec(t.detail,t)}catch(e){this.ah(e,t)}}async ch(t){const e=l(this.$props.fullscreenOrientation),s=t.detail;if(!(pt(e)||!this.$c.supported))if(s){if(this.$c.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.$c.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}ah(t,e){this.Eb.bc(this.createEvent("fullscreen-error",{detail:Xt(t)}))}async"media-orientation-lock-request"(t){try{this.Tg.Ug.Db("orientation",t),await this.$c.lock(t.detail)}catch{this.Tg.Ug.Yg("orientation")}}async"media-orientation-unlock-request"(t){try{this.Tg.Ug.Db("orientation",t),await this.$c.unlock()}catch{this.Tg.Ug.Yg("orientation")}}async"media-enter-pip-request"(t){try{await this.fc(t)}catch(e){this.bh(e,t)}}async"media-exit-pip-request"(t){try{await this.gc(t)}catch(e){this.bh(e,t)}}bh(t,e){this.Eb.bc(this.createEvent("picture-in-picture-error",{detail:Xt(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(!(!e()||s()||!i())){this.Tg.Ug.Db("seeked",t);try{this.hc()}catch{}}}"media-loop-request"(t){window.requestAnimationFrame(async()=>{try{this.Tg.Zg=!0,this.Tg.Wg=!0,await this.$b(t)}catch{this.Tg.Zg=!1,this.Tg.Wg=!1}})}async"media-pause-request"(t){if(!this.$state.paused())try{await this._b(t)}catch{this.Tg.Ug.Yg("pause")}}async"media-play-request"(t){if(this.$state.paused())try{await this.$b(t)}catch{}}"media-rate-change-request"(t){this.$state.playbackRate()!==t.detail&&(this.Tg.Ug.Db("rate",t),this.W().playbackRate=t.detail)}"media-quality-change-request"(t){if(this.g.qualities.readonly)return;this.Tg.Ug.Db("quality",t);const e=t.detail;if(e<0)this.g.qualities.autoSelect(t);else{const s=this.g.qualities[e];s&&(s.selected=!0)}}"media-pause-controls-request"(t){this.Tg.Ug.Db("controls",t),this.cc.pause(t)}"media-resume-controls-request"(t){this.Tg.Ug.Db("controls",t),this.cc.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:r,live:a,userBehindLiveEdge:o}=this.$state;i()&&(this.Tg.Wg=!0),this.Tg.Cd=!1,this.Tg.Ug.Yg("seeking");const c=Math.min(Math.max(e()+.1,t.detail),s()-.1);!Number.isFinite(c)||!r()||(this.Tg.Ug.Db("seeked",t),this.W().currentTime=c,a()&&t.isOriginTrusted&&Math.abs(s()-c)>=2&&o.set(!0))}"media-seeking-request"(t){this.Tg.Ug.Db("seeking",t),this.$state.seeking.set(!0),this.Tg.Cd=!0}"media-start-loading"(t){this.$state.canLoad()||(this.Tg.Ug.Db("load",t),this.Eb.bc(this.createEvent("can-load")))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.g.textTracks[e];i&&(this.Tg.Ug.Db("textTrack",t),i.setMode(s,t))}"media-mute-request"(t){this.$state.muted()||(this.Tg.Ug.Db("volume",t),this.W().muted=!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;e()&&(this.Tg.Ug.Db("volume",t),this.g.$provider().muted=!1,s()===0&&(this.Tg.Ug.Db("volume",t),this.W().volume=.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;s()!==i&&(this.Tg.Ug.Db("volume",t),this.W().volume=i,i>0&&e()&&(this.Tg.Ug.Db("volume",t),this.W().muted=!1))}}function ie(n,t){if(!(n&&t))throw Error("[vidstack] media not ready")}function hs(n,t){if(!t?.supported)throw Error("[vidstack] no fullscreen support")}var On=qn;function qn(n,t,e){var s=null,i=null,r=function(){s&&(clearTimeout(s),i=null,s=null)},a=function(){var c=i;r(),c&&c()},o=function(){if(!t)return n.apply(this,arguments);var c=this,u=arguments,x=e&&!s;if(r(),i=function(){n.apply(c,u)},s=setTimeout(function(){if(s=null,!x){var M=i;return i=null,M()}},t),x)return i()};return o.cancel=r,o.flush=a,o}var At=Dn;function Dn(n,t,e){var s=null,i=null,r=e&&e.leading,a=e&&e.trailing;r==null&&(r=!0),a==null&&(a=!r),r==!0&&(a=!1);var o=function(){s&&(clearTimeout(s),s=null)},c=function(){var x=i;o(),x&&x()},u=function(){var x=r&&!s,M=this,V=arguments;if(i=function(){return n.apply(M,V)},s||(s=setTimeout(function(){if(s=null,a)return i()},t)),x)return x=!1,i()};return u.cancel=o,u.flush=c,u}const Wn=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class In extends ot{constructor(t,e){super(),this.hh=new Map,this.mh=!1,this.lh=!1,this.seeking=At(s=>{const{seeking:i,currentTime:r,paused:a}=this.$state;i.set(!0),r.set(s.detail),this.ih("seeking",s),a()&&(this.jh=s,this.oh())},150,{leading:!0}),this.oh=On(()=>{if(!this.jh)return;this.mh=!0;const{waiting:s,playing:i}=this.$state;s.set(!0),i.set(!1);const r=this.createEvent("waiting",{trigger:this.jh});this.hh.set("waiting",r),this.dispatch(r),this.jh=void 0,this.mh=!1},300),this.Tg=t,this.g=e}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){this.vh(),this.wh(),this.xh(),this.yh(),T(this.zh.bind(this))}bc(t){if(!this.scope)return;const e=t.type;this[t.type]?.(t),Wn.has(e)&&this.hh.set(e,t),this.dispatch(t)}yh(){this.lh&&(this.g.$provider()?.paused&&requestAnimationFrame(()=>{this.scope&&this.g.remote.play(new F("dom-connect"))}),this.lh=!1)}zh(){this.lh||(this.lh=!this.g.$state.paused(),this.g.$provider()?.pause())}kh(){this.ph(),this.Tg.Wg=!1,this.Tg.Zg=!1,this.mh=!1,this.jh=void 0,this.hh.clear()}ih(t,e){this.Tg.Ug.Dh(t,s=>{e.request=s,S(e,s)})}vh(){this.nh(),this.qh();const t=this.g.textTracks;d(t,"add",this.nh.bind(this)),d(t,"remove",this.nh.bind(this)),d(t,"mode-change",this.qh.bind(this))}wh(){const t=this.g.qualities;d(t,"add",this.rh.bind(this)),d(t,"remove",this.rh.bind(this)),d(t,"change",this.x.bind(this)),d(t,"auto-change",this.Ah.bind(this)),d(t,"readonly-change",this.Bh.bind(this))}xh(){const t=this.g.audioTracks;d(t,"add",this.sh.bind(this)),d(t,"remove",this.sh.bind(this)),d(t,"change",this.Ch.bind(this))}nh(t){const{textTracks:e}=this.$state;e.set(this.g.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}qh(t){t&&this.ih("textTrack",t);const e=this.g.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}sh(t){const{audioTracks:e}=this.$state;e.set(this.g.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Ch(t){const{audioTrack:e}=this.$state;e.set(this.g.audioTracks.selected),this.ih("audioTrack",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}rh(t){const{qualities:e}=this.$state;e.set(this.g.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}x(t){const{quality:e}=this.$state;e.set(this.g.qualities.selected),this.ih("quality",t),this.dispatch("quality-change",{detail:e(),trigger:t})}Ah(){this.$state.autoQuality.set(this.g.qualities.auto)}Bh(){this.$state.canSetQuality.set(!this.g.qualities.readonly)}"provider-change"(t){const e=this.g.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.g.$provider.set(t.detail),e&&t.detail===null&&this.th(t))}"provider-loader-change"(t){}autoplay(t){this.$state.autoplayError.set(null)}"autoplay-fail"(t){this.$state.autoplayError.set(t.detail),this.kh()}"can-load"(t){this.$state.canLoad.set(!0),this.hh.set("can-load",t),this.ih("load",t),this.g.textTracks[O.Va]()}"media-type-change"(t){S(t,this.hh.get("source-change"));const e=this.$state.viewType();this.$state.mediaType.set(t.detail);const s=this.$state.providedViewType(),i=s==="unknown"?t.detail:s;e!==i&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:i,trigger:t}))})},0)}"stream-type-change"(t){const{streamType:e,inferredStreamType:s}=this.$state;S(t,this.hh.get("source-change")),s.set(t.detail),t.detail=e()}"rate-change"(t){this.$state.playbackRate.set(t.detail),this.ih("rate",t)}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){S(t,this.hh.get("sources-change")),this.th(t),this.hh.set(t.type,t),this.$state.source.set(t.detail),this.el?.setAttribute("aria-busy","true")}th(t){this.g.audioTracks[w.db](t),this.g.qualities[w.db](t),this.kh(),Ji(this.g.$state)}abort(t){const e=this.hh.get("source-change");S(t,e),e?.trigger||S(t,this.hh.get("can-load"))}"load-start"(t){S(t,this.hh.get("source-change"))}error(t){this.$state.error.set(t.detail),S(t,this.hh.get("abort"))}"loaded-metadata"(t){S(t,this.hh.get("load-start"))}"loaded-data"(t){S(t,this.hh.get("load-start"))}"can-play"(t){t.trigger?.type!=="loadedmetadata"&&S(t,this.hh.get("loaded-metadata")),this.uh(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.uh(t.detail),S(t,this.hh.get("can-play"))}uh(t){const{seekable:e,seekableEnd:s,buffered:i,duration:r,canPlay:a}=this.$state;a.set(!0),i.set(t.buffered),e.set(t.seekable),r.set(s())}"duration-change"(t){const{live:e,duration:s}=this.$state,i=t.detail;e()||s.set(Number.isNaN(i)?0:i)}progress(t){const{buffered:e,seekable:s,live:i,duration:r,seekableEnd:a}=this.$state,o=t.detail;e.set(o.buffered),s.set(o.seekable),i()&&(r.set(a),this.dispatch("duration-change",{detail:a(),trigger:t}))}play(t){const{paused:e,autoplayError:s,ended:i,autoplaying:r,playsinline:a,pointer:o,muted:c}=this.$state;if(t.autoplay=r(),this.Tg.Zg||!e()){t.stopImmediatePropagation();return}S(t,this.hh.get("waiting")),this.ih("play",t),this.hh.set("play",t),e.set(!1),s.set(null),r()&&(this.bc(this.createEvent("autoplay",{detail:{muted:c()},trigger:t})),r.set(!1)),(i()||this.Tg.Wg)&&(this.Tg.Wg=!1,i.set(!1),this.bc(this.createEvent("replay",{trigger:t}))),!a()&&o()==="coarse"&&this.g.remote.enterFullscreen("prefer-media",t)}"play-fail"(t){const{muted:e,autoplaying:s}=this.$state;S(t,this.hh.get("play")),this.ih("play",t);const{paused:i,playing:r}=this.$state;i.set(!0),r.set(!1),this.kh(),this.hh.set("play-fail",t),s()&&(this.bc(this.createEvent("autoplay-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.hh.get("play");e?(S(t,this.hh.get("waiting")),S(t,e)):S(t,this.hh.get("seeked")),setTimeout(()=>this.kh(),0);const{paused:s,playing:i,live:r,liveSyncPosition:a,seekableEnd:o,started:c,currentTime:u,seeking:x,ended:M}=this.$state;if(s.set(!1),i.set(!0),x.set(!1),M.set(!1),this.Tg.Zg){t.stopImmediatePropagation(),this.Tg.Zg=!1;return}if(r()&&!c()&&u()===0){const V=a()??o()-2;Number.isFinite(V)&&(this.g.$provider().currentTime=V)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.bc(this.createEvent("started",{trigger:t})))}pause(t){if(this.el?.isConnected||(this.lh=!0),this.Tg.Zg){t.stopImmediatePropagation();return}S(t,this.hh.get("seeked")),this.ih("pause",t);const{paused:e,playing:s,seeking:i}=this.$state;e.set(!0),s.set(!1),i.set(!1),this.kh()}"time-update"(t){const{currentTime:e,played:s,waiting:i}=this.$state,r=t.detail;e.set(r.currentTime),s.set(r.played),i.set(!1);for(const a of this.g.textTracks)a[O.Ua](r.currentTime,t)}"volume-change"(t){const{volume:e,muted:s}=this.$state,i=t.detail;e.set(i.volume),s.set(i.muted||i.volume===0),this.ih("volume",t)}seeked(t){const{seeking:e,currentTime:s,paused:i,duration:r,ended:a}=this.$state;if(this.Tg.Cd)e.set(!0),t.stopImmediatePropagation();else if(e()){const o=this.hh.get("waiting");S(t,o),o?.trigger?.type!=="seeking"&&S(t,this.hh.get("seeking")),i()&&this.ph(),e.set(!1),t.detail!==r()&&a.set(!1),s.set(t.detail),this.ih("seeked",t);const c=t.originEvent;c&&c.isTrusted&&!/seek/.test(c.type)&&this.started(t)}}waiting(t){this.mh||this.Tg.Cd||(t.stopImmediatePropagation(),this.jh=t,this.oh())}ended(t){if(this.Tg.Zg){t.stopImmediatePropagation();return}const{paused:e,playing:s,seeking:i,ended:r}=this.$state;e.set(!0),s.set(!1),i.set(!1),r.set(!0),this.kh()}ph(){this.oh.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){this.$state.fullscreen.set(t.detail),this.ih("fullscreen",t)}"fullscreen-error"(t){this.ih("fullscreen",t)}"orientation-change"(t){this.ih("orientation",t)}"picture-in-picture-change"(t){this.$state.pictureInPicture.set(t.detail),this.ih("pip",t)}"picture-in-picture-error"(t){this.ih("pip",t)}"poster-change"(t){this.$state.poster.set(t.detail)}}class Fn extends ot{onSetup(){h(this.Fh.bind(this)),h(this.Gh.bind(this)),h(this.Hh.bind(this)),h(this.Ih.bind(this)),h(this.Jh.bind(this)),h(this.Kh.bind(this)),h(this.Lh.bind(this)),h(this.Mh.bind(this)),h(this.Nh.bind(this))}Eh(){}Fh(){const t=this.$props.autoplay();this.$state.autoplay.set(t),this.dispatch("autoplay-change",{detail:t})}Hh(){const t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Ih(){const t=this.$props.controls();this.$state.controls.set(t)}Gh(){const t=this.$props.poster();this.$state.poster.set(t),this.dispatch("poster-change",{detail:t})}Jh(){const t=this.$props.crossorigin();this.$state.crossorigin.set(t===!0?"":t)}Kh(){const t=this.$props.playsinline();this.$state.playsinline.set(t),this.dispatch("playsinline-change",{detail:t})}Mh(){this.dispatch("live-change",{detail:this.$state.live()})}Lh(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Nh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}let ne=v(!1);d(document,"pointerdown",()=>{ne.set(!1)}),d(document,"keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||ne.set(!0)});class K extends B{constructor(){super(...arguments),this.Uh=v(!1)}onConnect(t){h(()=>{if(!ne()){this.Uh.set(!1),Lt(t,!1),this.listen("pointerenter",this.Vh.bind(this)),this.listen("pointerleave",this.Wh.bind(this));return}const e=document.activeElement===t;this.Uh.set(e),Lt(t,e),this.listen("focus",this.Xh.bind(this)),this.listen("blur",this.Yh.bind(this))})}focused(){return this.Uh()}Xh(){this.Uh.set(!0),Lt(this.el,!0)}Yh(){this.Uh.set(!1),Lt(this.el,!1)}Vh(){os(this.el,!0)}Wh(){os(this.el,!1)}}function Lt(n,t){p(n,"data-focus",t),p(n,"data-hocus",t)}function os(n,t){p(n,"data-hocus",t),p(n,"data-hover",t)}class Hn{constructor(){this.ci=!1,this.di=Fe(),this.Ug=new Map}get gi(){return this.Ug.size}get hi(){return this.ci}async ii(){this.ci||await this.di.promise}Db(t,e){if(this.ci){e();return}this.Ug.delete(t),this.Ug.set(t,e)}Dh(t){this.Ug.get(t)?.(),this.Ug.delete(t)}D(){this.ei(),this.ci=!0,this.Ug.size>0&&this.ei()}E(){this.ci=!1}db(){this.E(),this.Ug.clear(),this.fi()}ei(){for(const t of this.Ug.keys())this.Dh(t);this.fi()}fi(){this.di.resolve(),this.di=Fe()}}var Nn=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,E=(n,t,e,s)=>{for(var i=s>1?void 0:s?Un(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Nn(t,e,i),i};const k=class Ut extends m{constructor(){super(),this.canPlayQueue=new Hn,this.Pb(),new Fn;const t={player:this,scope:Oe(),qualities:new un,audioTracks:new rn,$provider:v(null),$props:this.$props,$state:this.$state};t.remote=new Zi(void 0),t.remote.setPlayer(this),t.$iosControls=G(this.Qb.bind(this)),t.textTracks=new nn,t.textTracks[O.Ta]=this.$state.crossorigin,t.textRenderers=new sn(t),t.ariaKeys={},this.g=t,R(Qe,t),this.orientation=new as,new K,new yn(t);const e=new An;this.Eb=new In(e,t),this.Cb=new Ln(this.Eb,e,t),t.delegate=new En(this.Eb.bc.bind(this.Eb),t),new xn(this.startLoading.bind(this))}get W(){return this.g.$provider()}onSetup(){this.Rb(),h(this.Sb.bind(this)),h(this.Tb.bind(this)),h(this.Ub.bind(this)),h(this.Vb.bind(this)),h(this.Wb.bind(this)),h(this.Xb.bind(this)),h(this.Yb.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),$(t,"tabindex","0"),$(t,"role","region"),h(this.Gb.bind(this)),h(this.Hb.bind(this)),d(t,"find-media-player",this.Zb.bind(this))}onConnect(t){je&&p(t,"data-iphone",""),Ni().then(this.$state.canSetVolume.set);const e=window.matchMedia("(pointer: coarse)");this.Ib(e),e.onchange=this.Ib.bind(this);const s=new ResizeObserver(gt(this.Fb.bind(this)));s.observe(t),h(this.Fb.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),T(()=>{s.disconnect(),e.onchange=null})}onDestroy(){this.g.player=null,this.canPlayQueue.db()}Pb(){const t={viewType:"providedViewType",streamType:"providedStreamType"};for(const e of Object.keys(this.$props))this.$state[t[e]??e]?.set(this.$props[e]());h(this.Jb.bind(this)),this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}Gb(){const{title:t}=this.$props,{live:e,viewType:s}=this.$state,i=e(),r=Oi(s()),a=r!=="Unknown"?`${i?"Live ":""}${r}`:i?"Live":"Media",o=t();o&&(this.el?.setAttribute("data-title",o),this.el?.removeAttribute("title"));const c=this.el?.getAttribute("data-title")||"";this.$state.title.set(c),p(this.el,"aria-label",c?`${a} - ${c}`:a+" Player")}Hb(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),p(this.el,"data-orientation",t),this.Fb()}Sb(){this.$state.canPlay()&&this.W?this.canPlayQueue.D():this.canPlayQueue.E()}Jb(){this.$state.providedViewType.set(this.$props.viewType()),this.$state.providedStreamType.set(this.$props.streamType())}Rb(){if(Ut[ee]){this.setAttributes(Ut[ee]);return}const t={"data-captions":function(){const s=this.$state.textTrack();return!!s&&L(s)},"data-ios-controls":function(){return this.g.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canPlay:s,waiting:i}=this.$state;return!s()||i()},"data-error":function(){const{error:s}=this.$state;return!!s()}},e={canPictureInPicture:"can-pip",pictureInPicture:"pip"};for(const s of wn){const i="data-"+(e[s]??Ie(s));t[i]=function(){return this.$state[s]()}}delete t.title,Ut[ee]=t,this.setAttributes(t)}Zb(t){t.detail(this)}Fb(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),H(this.el,"--player-width",t+"px"),H(this.el,"--player-height",e+"px")}Ib(t){const e=t.matches?"coarse":"fine";p(this.el,"data-pointer",e),this.$state.pointer.set(e),this.Fb()}Qb(){const{playsinline:t,fullscreen:e}=this.$state;return je&&!Mn()&&this.$state.mediaType()==="video"&&(!t()||e())}get provider(){return this.W}get controls(){return this.Cb.cc}get qualities(){return this.g.qualities}get audioTracks(){return this.g.audioTracks}get textTracks(){return this.g.textTracks}get textRenderers(){return this.g.textRenderers}get paused(){return this.W?.paused??!0}set paused(t){this.Kb(t)}Ub(){this.Kb(this.$props.paused())}Kb(t){t?this.canPlayQueue.Db("paused",()=>this.Cb._b()):this.canPlayQueue.Db("paused",()=>this.Cb.$b())}get muted(){return this.W?.muted??!1}set muted(t){this.Lb(t)}Tb(){this.Lb(this.$props.muted())}Lb(t){this.canPlayQueue.Db("muted",()=>this.W.muted=t)}get currentTime(){return this.W?.currentTime??0}set currentTime(t){this.Mb(t)}Wb(){this.Mb(this.$props.currentTime())}Mb(t){this.canPlayQueue.Db("currentTime",()=>{const e=this.W;t!==e.currentTime&&l(()=>{const s=Math.min(Math.max(this.$state.seekableStart()+.1,t),this.$state.seekableEnd()-.1);Number.isFinite(s)&&(e.currentTime=s)})})}get volume(){return this.W?.volume??1}set volume(t){this.Nb(t)}Vb(){this.Nb(this.$props.volume())}Nb(t){const e=Rt(0,t,1);this.canPlayQueue.Db("volume",()=>this.W.volume=e)}get playbackRate(){return this.W?.playbackRate??1}set playbackRate(t){this.Ob(t)}Yb(){this.Ob(this.$props.playbackRate())}Ob(t){this.canPlayQueue.Db("rate",()=>this.W.playbackRate=t)}Xb(){this.ac(this.$props.playsinline())}ac(t){this.canPlayQueue.Db("playsinline",()=>this.W.playsinline=t)}async play(t){return this.Cb.$b(t)}async pause(t){return this.Cb._b(t)}async enterFullscreen(t,e){return this.Cb.dc(t,e)}async exitFullscreen(t,e){return this.Cb.ec(t,e)}enterPictureInPicture(t){return this.Cb.fc(t)}exitPictureInPicture(t){return this.Cb.gc(t)}seekToLiveEdge(t){this.Cb.hc(t)}startLoading(t){this.g.delegate.f("can-load",{trigger:t})}matchQuery(t){return nt(()=>Mt.create(t),this.scope)}destroy(){this.g.remote.setPlayer(null),this.dispatch("destroy")}};k.props=kn,k.state=zt,E([b],k.prototype,"canPlayQueue",2),E([b],k.prototype,"provider",1),E([b],k.prototype,"controls",1),E([b],k.prototype,"orientation",2),E([b],k.prototype,"qualities",1),E([b],k.prototype,"audioTracks",1),E([b],k.prototype,"textTracks",1),E([b],k.prototype,"textRenderers",1),E([b],k.prototype,"paused",1),E([b],k.prototype,"muted",1),E([b],k.prototype,"currentTime",1),E([b],k.prototype,"volume",1),E([b],k.prototype,"playbackRate",1),E([C],k.prototype,"play",1),E([C],k.prototype,"pause",1),E([C],k.prototype,"enterFullscreen",1),E([C],k.prototype,"exitFullscreen",1),E([C],k.prototype,"enterPictureInPicture",1),E([C],k.prototype,"exitPictureInPicture",1),E([C],k.prototype,"seekToLiveEdge",1),E([C],k.prototype,"startLoading",1),E([C],k.prototype,"matchQuery",1);let jn=k;class Vn{canPlay({src:t,type:e}){return W(t)?Ui.test(t)||ji.has(e)||t.startsWith("blob:")&&e==="audio/object":e==="audio/object"}mediaType(){return"audio"}async load(){return new(await import("./providers/vidstack-audio.js")).AudioProvider(this.target)}}class cs{canPlay(t){return W(t.src)?Vi.test(t.src)||Ri.has(t.type)||t.src.startsWith("blob:")&&t.type==="video/object"||Kt(t)&&Ki():t.type==="video/object"}mediaType(){return"video"}async load(t){return new(await import("./providers/vidstack-video.js")).VideoProvider(this.target,t)}}const ls=class Ei extends cs{preconnect(){Qt("https://cdn.jsdelivr.net","preconnect")}canPlay(t){return Ei.supported&&Kt(t)}async load(t){return new(await import("./providers/vidstack-hls.js")).HLSProvider(this.target,t)}};ls.supported=Ve();let Rn=ls;function ds(n,t){return fetch(n,t).then(e=>e.text()).then(e=>{const s=Kn(e);if(s)return ds(/^https?:/.test(s)?s:new URL(s,n).href,t);const i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return i==="live"&&Bn(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function Kn(n){const t=n.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function Bn(n){const t=n.split(`
`);for(const e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){const s=parseFloat(e.split(":")[1]);if(!isNaN(s))return s}return-1}const us=Symbol(0);class Qn{constructor(t,e,s){this.ji=!1,this.lc=t,this.g=e,this.ic=s;const i=new Rn,r=new cs,a=new Vn;this.ki=G(()=>e.$props.preferNativeHLS()?[r,a,i]:[i,r,a]);const{$state:o}=e;o.sources.set(ps(e.$props.src()));for(const c of o.sources()){const u=this.ki().find(M=>M.canPlay(c));if(!u)continue;const x=u.mediaType(c);this.g.$state.source.set(c),this.g.$state.mediaType.set(x),this.g.$state.inferredViewType.set(x),this.ic.set(u),this.ji=!0}}connect(){const t=this.ic();this.ji&&(this.li(this.g.$state.source(),t),this.mi(t),this.ji=!1),h(this.oi.bind(this)),h(this.pi.bind(this)),h(this.qi.bind(this)),h(this.ri.bind(this))}oi(){this.g.delegate.f("sources-change",{detail:[...ps(this.g.$props.src()),...this.lc()]})}pi(){const{$state:t}=this.g,e=t.sources(),s=l(t.source),i=this.ni(s,e);if(e[0]?.src&&!i.src&&!i.type){const{crossorigin:r}=t,a=Gt(r()),o=new AbortController;return Promise.all(e.map(c=>W(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:a,signal:o.signal}).then(u=>(c.type=u.headers.get("content-type")||"??",c)).catch(()=>c):c)).then(c=>{o.signal.aborted||(this.ni(l(t.source),c),z())}),()=>o.abort()}z()}ni(t,e){let s={src:"",type:""},i=null;for(const r of e){const a=l(this.ki).find(o=>o.canPlay(r));a&&(s=r,i=a)}return gs(t,s)||this.li(s,i),i!==l(this.ic)&&this.mi(i),s}li(t,e){this.g.delegate.f("source-change",{detail:t}),this.g.delegate.f("media-type-change",{detail:e?.mediaType(t)||"unknown"})}mi(t){this.g.delegate.f("provider-change",{detail:null}),t&&l(()=>t.preconnect?.(this.g)),this.ic.set(t),this.g.delegate.f("provider-loader-change",{detail:t})}qi(){const t=this.g.$provider();if(!(!t||t[us])){if(this.g.$state.canLoad()){nt(()=>t.setup(this.g),t.scope),t[us]=!0;return}l(()=>t.preconnect?.(this.g))}}ri(){const t=this.g.$provider(),e=this.g.$state.source(),s=l(this.g.$state.crossorigin);if(!gs(t?.currentSrc,e)){if(this.g.$state.canLoad()){const i=new AbortController;return Kt(e)?Ve()||ds(e.src,{credentials:Gt(s),signal:i.signal}).then(r=>{this.g.delegate.f("stream-type-change",{detail:r})}).catch(qi):this.g.delegate.f("stream-type-change",{detail:"on-demand"}),l(()=>t?.loadSource(e,l(this.g.$state.preload))),()=>i.abort()}try{W(e.src)&&Qt(new URL(e.src).origin,"preconnect")}catch{}}}}function ps(n){return(Y(n)?n:[!W(n)&&"src"in n?n:{src:n}]).map(({src:t,type:e})=>({src:t,type:e??(!W(t)||t.startsWith("blob:")?"video/object":"?")}))}function gs(n,t){return n?.src===t?.src&&n?.type===t?.type}class Gn{constructor(t,e){this.si=[],this.mc=t,this.g=e,h(this.ti.bind(this))}ti(){const t=this.mc();for(const e of this.si)if(!t.some(s=>s.id===e.id)){const s=e.id&&this.g.textTracks.getById(e.id);s&&this.g.textTracks.remove(s)}for(const e of t){const s=e.id||Bt.createId(e);this.g.textTracks.getById(s)||(e.id=s,this.g.textTracks.add(e))}this.si=t}}var Xn=Object.defineProperty,Yn=Object.getOwnPropertyDescriptor,zn=(n,t,e,s)=>{for(var i=s>1?void 0:s?Yn(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Xn(t,e,i),i};class re extends m{constructor(){super(...arguments),this.lc=v([]),this.mc=v([]),this.ic=null,this.jc=-1}onSetup(){this.g=y(),this.kc=new Qn(this.lc,this.g,this.$state.loader)}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.kc.connect(),new Gn(this.mc,this.g);const e=new ResizeObserver(gt(this.Fb.bind(this)));e.observe(t);const s=new MutationObserver(this.nc.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.Fb(),this.nc(),T(()=>{e.disconnect(),s.disconnect()})}load(t){window.cancelAnimationFrame(this.jc),this.jc=requestAnimationFrame(()=>this.pc(t)),T(()=>{window.cancelAnimationFrame(this.jc)})}pc(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.g;this.ic===e&&e?.target===t&&l(s)||(this.oc(),this.ic=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.g).then(i=>{this.scope&&l(this.$state.loader)===e&&(i&&l(()=>{const{muted:r,volume:a,playsinline:o}=this.g.$state;i.muted=r(),i.volume=a(),i.playsinline=o()}),this.g.delegate.f("provider-change",{detail:i}))}))}onDestroy(){this.ic=null,this.oc()}oc(){this.g.delegate.f("provider-change",{detail:null})}Fb(){if(!this.el)return;const t=this.g.player,e=this.el.offsetWidth,s=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(s),t.el&&(H(t.el,"--media-width",e+"px"),H(t.el,"--media-height",s+"px")))}nc(){const t=[],e=[],s=this.el.children;for(const i of s)i instanceof HTMLSourceElement?t.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&e.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")});this.lc.set(t),this.mc.set(e),z()}}re.state=new Z({loader:null}),zn([C],re.prototype,"load",1);class ms extends m{onSetup(){this.g=y(),h(this.rc.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.g.$state;H(t,"pointer-events","none"),$(t,"role","group"),this.setAttributes({"data-visible":this.qc.bind(this),"data-fullscreen":s,"data-pip":e}),h(()=>{this.dispatch("change",{detail:this.qc()})}),h(this.sc.bind(this)),h(()=>{const i=s();for(const r of["top","right","bottom","left"])H(t,`padding-${r}`,i&&`env(safe-area-inset-${r})`)})}sc(){if(!this.el)return;const{$iosControls:t}=this.g,{controls:e}=this.g.$state,s=e()||t();p(this.el,"aria-hidden",s?"true":null),H(this.el,"display",s?"none":null)}rc(){const{controls:t}=this.g.player,{hideDelay:e}=this.$props;t.defaultDelay=e()===2e3?this.g.$props.controlsDelay():e()}qc(){const{controlsVisible:t}=this.g.$state;return t()}}ms.props={hideDelay:2e3};class Jn extends m{onAttach(t){H(t,"pointer-events","auto")}}class fs extends B{constructor(t){super(),this.vi=-1,this.wi=-1,this.ui=null,this.O=t,h(this.xi.bind(this))}onDestroy(){this.ui?.(),this.ui=null}xi(){const t=this.O.tc();if(!t){this.hide();return}const e=this.show.bind(this),s=this.hide.bind(this);this.O.Bc(t,e,s)}show(t){window.cancelAnimationFrame(this.wi),this.wi=-1,this.ui?.(),this.ui=null,this.vi=window.setTimeout(()=>{this.vi=-1;const e=this.O.uc();e&&e.style.removeProperty("display"),l(()=>this.O.Ma(!0,t))},this.O.Ac?.()??0)}hide(t){window.clearTimeout(this.vi),this.vi=-1,l(()=>this.O.Ma(!1,t)),this.wi=requestAnimationFrame(()=>{this.wi=-1;const e=this.O.uc();if(e){const s=_i(e),i=()=>{e.style.display="none",this.ui=null};if(s){this.ui?.();const r=d(e,"animationend",i,{once:!0});this.ui=r}else i()}})}}const ct=J();let Zn=0;class bs extends m{constructor(){super(),this.jb=`media-tooltip-${++Zn}`,this.tc=v(null),this.uc=v(null),new K;const{showDelay:t}=this.$props;new fs({tc:this.tc,uc:this.uc,Ac:t,Bc(e,s,i){d(e,"touchstart",r=>r.preventDefault(),{passive:!1}),d(e,"focus",s),d(e,"blur",i),d(e,"mouseenter",s),d(e,"mouseleave",i)},Ma:this.zc.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){R(ct,{tc:this.tc,uc:this.uc,vc:this.vc.bind(this),wc:this.wc.bind(this),xc:this.xc.bind(this),yc:this.yc.bind(this)})}vc(t){this.tc.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),p(t,"data-describedby",this.jb)}wc(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.tc.set(null)}xc(t){t.setAttribute("id",this.jb),t.style.display="none",$(t,"role","tooltip"),this.uc.set(t)}yc(t){t.removeAttribute("id"),t.removeAttribute("role"),this.uc.set(null)}zc(t){const e=this.tc(),s=this.uc();e&&p(e,"aria-describedby",t?this.jb:null);for(const i of[this.el,e,s])i&&p(i,"data-visible",t)}}bs.props={showDelay:500};class _n extends m{constructor(){super(),new K}onConnect(t){T(ht(()=>{if(!this.connectScope)return;this.Dc();const e=P(ct);T(()=>{const s=this.Cc();s&&e.wc(s)})}))}Dc(){const t=this.Cc(),e=P(ct);t&&e.vc(t)}Cc(){return this.el.firstElementChild?.getAttribute("role")==="button"?this.el.firstElementChild:this.el}}class ys extends m{constructor(){super(),new K;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Dc(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Dc(t);const e=P(ct);T(()=>e.yc(t)),T(ht(()=>{this.connectScope&&h(this.Ec.bind(this))}))}Dc(t){P(ct).xc(t)}Ec(){const{placement:t,offset:e,alignOffset:s}=this.$props;return Ye(this.el,this.Fc(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}Fc(){return P(ct).tc()}}ys.props={placement:"top center",offset:0,alignOffset:0};class U extends B{constructor(t){super(),this.O=t,new K,t.Kc&&new Tn(t.Kc)}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.O.Hc,"aria-pressed":this.yi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){$(t,"tabindex","0"),$(t,"role","button"),$(t,"type","button")}onConnect(t){_(t,this.zi.bind(this))}yi(){return Pt(this.O.Hc())}Ai(t){Di(this.O.Hc)&&this.O.Hc.set(e=>!e)}zi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.stopImmediatePropagation();return}t.preventDefault(),(this.O.Ic??this.Ai).call(this,t)}}U.props={disabled:!1};var tr=Object.defineProperty,er=Object.getOwnPropertyDescriptor,sr=(n,t,e,s)=>{for(var i=s>1?void 0:s?er(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&tr(t,e,i),i};class ae extends m{constructor(){super(),this.Gc=v(!1),new U({Hc:this.Gc})}get pressed(){return this.Gc()}}ae.props={disabled:!1,defaultPressed:!1},sr([b],ae.prototype,"pressed",1);class vs extends m{constructor(){super(),new U({Hc:this.Hc.bind(this),Kc:"togglePaused",Ic:this.Ic.bind(this)})}onSetup(){this.g=y();const{paused:t,ended:e}=this.g.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),at(t,this.Jc.bind(this))}Ic(t){const e=this.g.remote;this.Hc()?e.pause(t):e.play(t)}Hc(){const{paused:t}=this.g.$state;return!t()}Jc(){const{paused:t}=this.g.$state;return t()?"Play":"Pause"}}vs.props=U.props;function ir(n){return n?"true":"false"}function j(n){return()=>ir(n())}class $s extends m{constructor(){super(),new U({Hc:this.Hc.bind(this),Kc:"toggleCaptions",Ic:this.Ic.bind(this)})}onSetup(){this.g=y(),this.setAttributes({"data-active":this.Hc.bind(this),"data-supported":()=>!this.Lc(),"aria-hidden":j(this.Lc.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),at(t,this.Jc.bind(this))}Ic(t){this.g.remote.toggleCaptions(t)}Hc(){const{textTrack:t}=this.g.$state,e=t();return!!e&&L(e)}Lc(){const{textTracks:t}=this.g.$state;return t().filter(L).length==0}Jc(){const{textTrack:t}=this.g.$state;return t()?"Closed-Captions Off":"Closed-Captions On"}}$s.props=U.props;class Ts extends m{constructor(){super(),new U({Hc:this.Hc.bind(this),Kc:"toggleFullscreen",Ic:this.Ic.bind(this)})}onSetup(){this.g=y();const{fullscreen:t}=this.g.$state,e=this.Mc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":j(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),at(t,this.Jc.bind(this))}Ic(t){const e=this.g.remote,s=this.$props.target();this.Hc()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}Hc(){const{fullscreen:t}=this.g.$state;return t()}Mc(){const{canFullscreen:t}=this.g.$state;return t()}Jc(){const{fullscreen:t}=this.g.$state;return t()?"Exit Fullscreen":"Enter Fullscreen"}}Ts.props={...U.props,target:"prefer-media"};class ws extends m{constructor(){super(),new U({Hc:this.Hc.bind(this),Kc:"toggleMuted",Ic:this.Ic.bind(this)})}onSetup(){this.g=y(),this.setAttributes({"data-muted":this.Hc.bind(this),"data-state":this.Nc.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),at(t,this.Jc.bind(this))}Ic(t){const e=this.g.remote;this.Hc()?e.unmute(t):e.mute(t)}Hc(){const{muted:t,volume:e}=this.g.$state;return t()||e()===0}Jc(){return this.Hc()?"Unmute":"Mute"}Nc(){const{muted:t,volume:e}=this.g.$state,s=e();if(t()||s===0)return"muted";if(s>=.5)return"high";if(s<.5)return"low"}}ws.props=U.props;class ks extends m{constructor(){super(),new U({Hc:this.Hc.bind(this),Kc:"togglePictureInPicture",Ic:this.Ic.bind(this)})}onSetup(){this.g=y();const{pictureInPicture:t}=this.g.$state,e=this.Mc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":j(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),at(t,this.Jc.bind(this))}Ic(t){const e=this.g.remote;this.Hc()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}Hc(){const{pictureInPicture:t}=this.g.$state;return t()}Mc(){const{canPictureInPicture:t}=this.g.$state;return t()}Jc(){const{pictureInPicture:t}=this.g.$state;return t()?"Exit Picture In Picture":"Enter Picture In Picture"}}ks.props=U.props;class xs extends m{constructor(){super(),new K}onSetup(){this.g=y();const{seeking:t}=this.g.$state,{seconds:e}=this.$props,s=this.Mc.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":j(()=>!s())})}onAttach(t){$(t,"tabindex","0"),$(t,"role","button"),$(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),at(t,this.Jc.bind(this))}onConnect(t){_(t,this.Ic.bind(this))}Mc(){const{canSeek:t}=this.g.$state;return t()}Jc(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}Ic(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.g.$state,r=i()+e();this.g.remote.seek(r,t)}}xs.props={disabled:!1,seconds:30};class Es extends m{constructor(){super(),new K}onSetup(){this.g=y();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.g.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":j(t),"aria-hidden":j(i)})}onAttach(t){$(t,"tabindex","0"),$(t,"role","button"),$(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){_(t,this.Ic.bind(this))}Ic(t){const{disabled:e}=this.$props,{liveEdge:s}=this.g.$state;e()||s()||this.g.remote.seekToLiveEdge(t)}}Es.props={disabled:!1};const he=new Z({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Ps(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Ps(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Ps(n,t,e){const s=t-n,i=e-n;return s>0?i/s:0}function nr(n,t,e,s){return Rt(n,q(e,Bi(s)),t)}function rr(n,t,e,s){const i=Rt(0,e,1),r=t-n,a=r*i,o=a/s,c=s*o;return n+c}const Ss={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class ar extends B{constructor(t,e){super(),this.W=null,this.Ci=null,this.Ei=null,this.Si=At(s=>{this.Di(this.Fi(s),s)},20,{leading:!0}),this.O=t,this.g=e}onConnect(){if(h(this.Li.bind(this)),h(this.Mi.bind(this)),this.O.Fd){const t=this.g.player.el?.querySelector("media-provider,[data-media-provider]");t&&(this.W=t,d(t,"touchstart",this.Ni.bind(this),{passive:!0}),d(t,"touchmove",this.Oi.bind(this),{passive:!1}))}}Ni(t){this.Ci=t.touches[0]}Oi(t){if(mt(this.Ci)||Jt(t))return;const e=t.touches[0],s=e.clientX-this.Ci.clientX,i=e.clientY-this.Ci.clientY,r=this.$state.dragging();!r&&Math.abs(i)>20||r||Math.abs(s)>20&&(this.Ci=e,this.Ei=this.$state.value(),this.Gi(this.Ei,t))}Li(){this.O.Uc()||(this.listen("focus",this.Xh.bind(this)),this.listen("pointerenter",this.Vh.bind(this)),this.listen("pointermove",this.Pi.bind(this)),this.listen("pointerleave",this.Wh.bind(this)),this.listen("pointerdown",this.Qi.bind(this)),this.listen("keydown",this.Ng.bind(this)),this.listen("keyup",this.Mg.bind(this)))}Mi(){this.O.Uc()||!this.$state.dragging()||(d(document,"pointerup",this.Ri.bind(this)),d(document,"pointermove",this.Si.bind(this)),Qi&&d(document,"touchmove",this.Ti.bind(this),{passive:!1}))}Xh(){this.Di(this.$state.value())}Hi(t,e){const{value:s,min:i,max:r,dragging:a}=this.$state,o=Math.max(i(),Math.min(t,r()));s.set(o);const c=this.createEvent("value-change",{detail:o,trigger:e});if(this.dispatch(c),this.O.od?.(c),a()){const u=this.createEvent("drag-value-change",{detail:o,trigger:e});this.dispatch(u),this.O.nd?.(u)}}Di(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.Hi(t,e)}Fi(t){let e,s=this.el.getBoundingClientRect(),{min:i,max:r}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:a,height:o}=s;e=(a-t.clientY)/o}else if(this.Ci&&He(this.Ei)){const{width:a}=this.W.getBoundingClientRect(),o=(t.clientX-this.Ci.clientX)/a,c=r()-i(),u=c*Math.abs(o);e=(o<0?this.Ei-u:this.Ei+u)/c}else{const{left:a,width:o}=s;e=(t.clientX-a)/o}return Math.max(i(),Math.min(r(),this.O.Tc(rr(i(),r(),e,this.O.Rc()))))}Vh(t){this.$state.pointing.set(!0)}Pi(t){const{dragging:e}=this.$state;e()||this.Di(this.Fi(t),t)}Wh(t){this.$state.pointing.set(!1)}Qi(t){if(t.button!==0)return;const e=this.Fi(t);this.Gi(e,t),this.Di(e,t)}Gi(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.g.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),this.O.vd?.(i)}Ji(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.g.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),this.O.sd?.(i),this.Ci=null,this.Ei=null}Ng(t){const{key:e}=t,{min:s,max:i}=this.$state;let r;if(e==="Home"||e==="PageUp"?r=s():e==="End"||e==="PageDown"?r=i():!t.metaKey&&/[0-9]/.test(e)&&(r=(i()-s())/10*Number(e)),!pt(r)){this.Di(r,t),this.Hi(r,t);return}const a=this.Ki(t);if(pt(a))return;const o=e===this.Ii;!this.$state.dragging()&&o&&this.Gi(a,t),this.Di(a,t),o||this.Hi(a,t),this.Ii=e}Mg(t){this.Ii="";const{dragging:e,value:s}=this.$state;if(!e())return;const i=this.Ki(t)??s();this.Di(i),this.Ji(i,t)}Ki(t){const{key:e,shiftKey:s}=t;if(!Object.keys(Ss).includes(e))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{value:r,min:a,max:o}=this.$state,c=this.O.Rc(),u=this.O.Sc(),x=s?u*i():u,M=Number(Ss[e]),V=x*M,jt=(r()+V)/c;return Math.max(a(),Math.min(o(),Number((c*jt).toFixed(3))))}Ri(t){if(t.button!==0)return;const e=this.Fi(t);this.Di(e,t),this.Ji(e,t)}Ti(t){t.preventDefault()}}const yt=J(()=>({})),oe=J();class et extends B{constructor(t){super(),this._c=gt((e,s)=>{this.el?.style.setProperty("--slider-fill",e+"%"),this.el?.style.setProperty("--slider-pointer",s+"%")}),this.O=t}onSetup(){this.g=y();const t=new K;t.attach(this),this.$state.focused=t.focused.bind(t),Q(yt)||R(yt,{default:"value"}),R(oe,{$c:this.$props.orientation,ad:this.O.Uc,bd:v(null)}),h(this.Wc.bind(this)),h(this.Xc.bind(this)),this.Yc(),new ar(this.O,this.g).attach(this)}onAttach(t){$(t,"role","slider"),$(t,"tabindex","0"),$(t,"autocomplete","off"),h(this.Vc.bind(this))}Wc(){const{dragging:t,value:e,min:s,max:i}=this.$state;l(t)||e.set(nr(s(),i(),e(),this.O.Rc()))}Xc(){if(!this.O.Uc())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}Zc(){return Pt(this.O.Uc())}Yc(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.Zc.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.O.Oc,"aria-valuetext":this.O.Pc,"aria-orientation":t})}Vc(){const{fillPercent:t,pointerPercent:e}=this.$state;this._c(q(t(),3),q(e(),3))}}et.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};class st extends m{constructor(){super(),new et({Rc:this.$props.step,Sc:this.$props.keyStep,Tc:Math.round,Uc:this.$props.disabled,Oc:this.Oc.bind(this),Pc:this.Pc.bind(this)})}onSetup(){h(this.Qc.bind(this))}Oc(){const{value:t}=this.$state;return Math.round(t())}Pc(){const{value:t,max:e}=this.$state;return q(t()/e()*100,2)+"%"}Qc(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}st.props={...et.props,min:0,max:100,value:0},st.state=he;const X=new Map,ce=new Set,le=new Set;class Le{constructor(t,e){this.$cues=v([]),this.$src=t,this.g=e,h(this.Uf.bind(this)),le.add(this),T(()=>le.delete(this))}static create(t){const e=y();return new Le(t,e)}Uf(){const{canLoad:t}=this.g.$state;if(!t())return;const e=new AbortController,{crossorigin:s}=this.g.$state,i=this.$src();if(i){if(X.has(i)){const r=X.get(i);if(X.delete(i),X.set(i,r),X.size>30){const a=X.keys().next().value;X.delete(a)}this.$cues.set(X.get(i))}else ce.has(i)||(ce.add(i),import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(async({parseResponse:r})=>{try{const a=await fetch(i,{signal:e.signal,credentials:Gt(s())});if(a.headers.get("content-type")==="application/json"){try{const{cues:c}=Gi(await a.text(),window.VTTCue);this.Tf(i,c)}catch{}return}const{cues:o}=await r(a);this.Tf(i,o)}catch{}}));return()=>{e.abort(),this.$cues.set([])}}}Tf(t,e){this.$cues.set(e);for(const s of le)l(s.$src)===t&&s.$cues.set(e);X.set(t,e),ce.delete(t)}}class de extends m{constructor(){super(...arguments),this.Lf=[],this.Mf=gt(this.Sf.bind(this))}onSetup(){this.g=y(),this.Kf=Le.create(this.$props.src),this.setAttributes({"data-loading":this.ed.bind(this),"data-error":this.dd.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":j(this.$state.hidden)})}onConnect(t){h(this.Gf.bind(this)),h(this.hd.bind(this)),h(this.K.bind(this)),h(this.Nf.bind(this)),h(this.Of.bind(this))}Gf(){const t=this.$state.img();t&&(d(t,"load",this.L.bind(this)),d(t,"error",this.p.bind(this)))}K(){const{src:t,loading:e,error:s}=this.$state;t(),e.set(!0),s.set(null)}L(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null),this.Mf()}p(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}ed(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}dd(){const{error:t}=this.$state;return!mt(t())}hd(){const{hidden:t}=this.$state,{duration:e}=this.g.$state,s=this.Kf.$cues();t.set(this.dd()||!Number.isFinite(e())||s.length===0)}cd(){return this.$props.time()}Nf(){const t=this.cd(),{activeCue:e}=this.$state,{duration:s}=this.g.$state,i=this.Kf.$cues();if(!i||!Number.isFinite(s())){e.set(null);return}e.set(Xi(i,t))}Of(){let{activeCue:t}=this.$state,e=t(),s=l(this.$props.src);if(/^https?:/.test(s)||(s=location.href),!s||!e){this.$state.src.set(""),this.Pf();return}const[i,r=""]=(e.text||"").split("#");this.$state.coords.set(this.Qf(r)),this.$state.src.set(this.Rf(i,s)),this.Mf()}Rf(t,e){return/^https?:/.test(t)?t:new URL(t,e).href}Qf(t){const[e,s]=t.split("="),i={},r=s?.split(",");if(!e||!s)return null;for(let a=0;a<e.length;a++)i[e[a]]=+r[a];return i}Sf(){if(!this.scope)return;const t=this.$state.img(),e=this.$state.coords();if(!t||!this.el)return;const s=e?.w??t.naturalWidth,i=e?.h??t.naturalHeight,{maxWidth:r,maxHeight:a,minWidth:o,minHeight:c}=getComputedStyle(this.el),u=Math.max(parseInt(o)/s,parseInt(c)/i),x=Math.min(parseInt(r)/s,parseInt(a)/i),M=x<1?x:u>1?u:1;this.Jf(this.el,"--thumbnail-width",`${s*M}px`),this.Jf(this.el,"--thumbnail-height",`${i*M}px`),this.Jf(t,"width",`${t.naturalWidth*M}px`),this.Jf(t,"height",`${t.naturalHeight*M}px`),this.Jf(t,"transform",e?`translate(-${e.x*M}px, -${e.y*M}px)`:""),this.Jf(t,"max-width","none")}Jf(t,e,s){t.style.setProperty(e,s),this.Lf.push(()=>t.style.removeProperty(e))}Pf(){for(const t of this.Lf)t();this.Lf=[]}}de.props={src:"",time:0},de.state=new Z({src:"",img:null,coords:null,activeCue:null,loading:!1,error:null,hidden:!1});var hr=Object.defineProperty,or=Object.getOwnPropertyDescriptor,cr=(n,t,e,s)=>{for(var i=s>1?void 0:s?or(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&hr(t,e,i),i};class Ot extends m{get video(){return this.$state.video()}onSetup(){this.g=y(),this.ub=ft(st.state),this.setAttributes({"data-loading":this.ed.bind(this),"data-hidden":this.$state.hidden,"data-error":this.dd.bind(this),"aria-hidden":j(this.$state.hidden)})}onAttach(t){h(this.fd.bind(this)),h(this.gd.bind(this)),h(this.hd.bind(this)),h(this.id.bind(this)),h(this.jd.bind(this))}fd(){const t=this.$state.video();t&&(t.readyState>=2&&this.ga(),d(t,"canplay",this.ga.bind(this)),d(t,"error",this.p.bind(this)))}gd(){const{src:t}=this.$state,{canLoad:e}=this.g.$state;t.set(e()?this.$props.src():null)}ed(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}dd(){const{error:t}=this.$state;return!mt(t)}hd(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.g.$state;e.set(s()&&(!t()||this.dd()||!Number.isFinite(i())))}id(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}ga(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}p(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}jd(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.g.$state,{pointerRate:i}=this.ub,r=t();e()&&r&&Number.isFinite(s())&&Number.isFinite(i())&&(r.currentTime=i()*s())}}Ot.props={src:null},Ot.state=new Z({video:null,src:null,canPlay:!1,error:null,hidden:!1}),cr([b],Ot.prototype,"video",1);function ue(n,t){const e=String(n),s=e.length;if(s<t){const i=t-s;return`${"0".repeat(i)}${n}`}return e}function Ms(n){const t=Math.trunc(n/3600),e=Math.trunc(n%3600/60),s=Math.trunc(n%60),i=Number((n-Math.trunc(n)).toPrecision(3));return{hours:t,minutes:e,seconds:s,fraction:i}}function qt(n,t=null,e=null,s=!1){const{hours:i,minutes:r,seconds:a}=Ms(n),o=t?ue(i,2):i,c=e||mt(e)&&n>=3600?ue(r,2):r,u=ue(a,2);return i>0||s?`${o}:${c}:${u}`:`${c}:${u}`}function pe(n){const t=[],{hours:e,minutes:s,seconds:i}=Ms(n);return e>0&&t.push(`${e} hour`),s>0&&t.push(`${s} min`),(i>0||t.length===0)&&t.push(`${i} sec`),t.join(" ")}var lr=Object.defineProperty,dr=Object.getOwnPropertyDescriptor,ur=(n,t,e,s)=>{for(var i=s>1?void 0:s?dr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&lr(t,e,i),i};class ge extends m{onSetup(){this.ub=ft(st.state),this.kd=P(yt),this.ld=G(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:r,showHours:a}=this.$props,{value:o,pointerValue:c,min:u,max:x}=this.ub,M=e()??this.kd.default,V=t()==="current"?o():c();if(M==="percent"){const jt=x()-u(),Pi=V/jt*100;return(this.kd.percent??q)(Pi,s())+"\uFE6A"}else return M==="time"?(this.kd.time??qt)(V,i(),r(),a()):this.kd.value?.(V)??V.toFixed(2)}}ge.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2},ur([C],ge.prototype,"getValueText",1);class Cs extends m{onSetup(){this.ub=P(oe);const{active:t}=ft(st.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{bd:e}=this.ub;e.set(t),T(()=>e.set(null)),h(this.md.bind(this));const s=new ResizeObserver(this.md.bind(this));s.observe(t),T(()=>s.disconnect())}md(){const{ad:t,$c:e}=this.ub;if(t())return;const s=this.el,{offset:i,noClamp:r}=this.$props;pr(s,{clamp:!r(),offset:i(),orientation:e()})}}Cs.props={offset:0,noClamp:!1};function pr(n,{clamp:t,offset:e,orientation:s}){const{width:i,height:r}=n.getBoundingClientRect(),a={top:null,right:null,bottom:null,left:null};if(a[s==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,s==="horizontal"){const o=i/2;if(!t)a.left=`calc(var(--slider-pointer) - ${o}px)`;else{const c=`max(0px, calc(var(--slider-pointer) - ${o}px))`,u=`calc(100% - ${i}px)`;a.left=`min(${c}, ${u})`}}else{const o=r/2;if(!t)a.bottom=`calc(var(--slider-pointer) - ${o}px)`;else{const c=`max(${o}px, calc(var(--slider-pointer) - ${o}px))`,u=`calc(100% - ${r}px)`;a.bottom=`min(${c}, ${u})`}}Object.assign(n.style,a)}class me extends m{constructor(){super(...arguments),this.pd=At(this.ua.bind(this),25)}onSetup(){this.g=y(),R(yt,{default:"percent"}),new et({Rc:this.$props.step,Sc:this.$props.keyStep,Uc:this.$props.disabled,Tc:Math.round,Oc:this.Oc.bind(this),Pc:this.Pc.bind(this),nd:this.nd.bind(this),od:this.od.bind(this)}).attach(this),h(this.Vb.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),$(t,"aria-label","Volume");const{canSetVolume:e}=this.g.$state;this.setAttributes({"data-supported":e,"aria-hidden":j(()=>!e())})}Oc(){const{value:t}=this.$state;return Math.round(t())}Pc(){const{value:t,max:e}=this.$state;return q(t()/e()*100,2)+"%"}Vb(){const{muted:t,volume:e}=this.g.$state,s=t()?0:e()*100;this.$state.value.set(s),this.dispatch("value-change",{detail:s})}ua(t){if(!t.trigger)return;const e=q(t.detail/100,3);this.g.remote.changeVolume(e,t)}od(t){this.pd(t)}nd(t){this.pd(t)}}me.props={...et.props,keyStep:5,shiftKeyMultiplier:2},me.state=he;class Dt extends m{constructor(){super(),this.ud=v(null),this.td=!1,new et({Fd:!0,Rc:this.Rc.bind(this),Sc:this.Sc.bind(this),Uc:this.Uc.bind(this),Tc:this.Tc,Oc:this.Oc.bind(this),Pc:this.Pc.bind(this),vd:this.vd.bind(this),nd:this.nd.bind(this),sd:this.sd.bind(this),od:this.od.bind(this)})}onSetup(){this.g=y(),R(yt,{default:"time",value:this.wd.bind(this),time:this.xd.bind(this)}),this.setAttributes({"data-chapters":this.yd.bind(this)}),this.setStyles({"--slider-progress":this.zd.bind(this)}),h(this.Wb.bind(this)),h(this.Ad.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),$(t,"aria-label","Seek")}onConnect(t){h(this.Bd.bind(this)),St(this.g.textTracks,"chapters",this.ud.set)}zd(){const{bufferedEnd:t,duration:e}=this.g.$state;return q(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}yd(){const{duration:t}=this.g.$state;return this.ud()?.cues.length&&Number.isFinite(t())&&t()>0}Ad(){this.rd=At(this.Cd.bind(this),this.$props.seekingRequestThrottle())}Wb(){const{currentTime:t}=this.g.$state,{value:e,dragging:s}=this.$state,i=this.Dd(t());l(s)||(e.set(i),this.dispatch("value-change",{detail:i}))}Bd(){const t=this.g.player.el,{bd:e}=P(oe);t&&e()&&p(t,"data-preview",this.$state.active())}Cd(t,e){this.g.remote.seeking(t,e)}Ed(t,e,s){this.rd.cancel();const{live:i}=this.g.$state;if(i()&&e>=99){this.g.remote.seekToLiveEdge(s);return}this.g.remote.seek(t,s)}vd(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:s}=this.g.$state;this.td=!s(),this.g.remote.pause(t)}}nd(t){this.rd(this.qd(t.detail),t)}sd(t){const e=t.detail;this.Ed(this.qd(e),e,t);const{pauseWhileDragging:s}=this.$props;s()&&this.td&&(this.g.remote.play(t),this.td=!1)}od(t){const{dragging:e}=this.$state;e()||!t.trigger||this.sd(t)}Rc(){const t=this.$props.step()/this.g.$state.duration()*100;return Number.isFinite(t)?t:1}Sc(){const t=this.$props.keyStep()/this.g.$state.duration()*100;return Number.isFinite(t)?t:1}Tc(t){return q(t,3)}Uc(){const{canSeek:t}=this.g.$state;return this.$props.disabled()||!t()}Oc(){const{value:t}=this.$state;return Math.round(t())}Pc(){const t=this.qd(this.$state.value()),{duration:e}=this.g.$state;return Number.isFinite(t)?`${pe(t)} out of ${pe(e())}`:"live"}qd(t){const{duration:e}=this.g.$state;return Math.round(t/100*e())}Dd(t){const{liveEdge:e,duration:s}=this.g.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?i*100:100}wd(t){const e=this.qd(t),{live:s,duration:i}=this.g.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}xd(t,e,s,i){const r=this.qd(t),{live:a,duration:o}=this.g.$state,c=a()?r-o():r;return Number.isFinite(r)?`${c<0?"-":""}${qt(Math.abs(c),e,s,i)}`:"LIVE"}}Dt.props={...et.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100},Dt.state=he;var gr=Object.defineProperty,mr=Object.getOwnPropertyDescriptor,Wt=(n,t,e,s)=>{for(var i=s>1?void 0:s?mr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&gr(t,e,i),i};class lt extends m{constructor(){super(...arguments),this.Hd=null,this.ud=null,this.Md=v(null),this.Gd=[],this.Wa=[],this.Nd=v(this.Wa),this.Id=v(-1),this.Jd=v(-1),this.Od=0,this.ce=gt(t=>{let e;for(let s=this.Od;s<this.Gd.length;s++)if(e=this.Qd(this.Wa[s],t),this.Gd[s]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Od=s;break}}),this.de=G(this.ee.bind(this))}get cues(){return this.Nd()}get activeCue(){return this.Wa[this.Id()]||null}get activePointerCue(){return this.Wa[this.Jd()]||null}onSetup(){this.g=y(),this.Kd=ft(Dt.state)}onAttach(t){const e=this.Vd.bind(this);St(this.g.textTracks,"chapters",e),h(this.Rd.bind(this))}onConnect(){T(this.db.bind(this))}setRefs(t){if(this.Gd=t,this.Ld?.dispose(),this.Gd.length===1){const e=this.Gd[0];e.style.width="100%",e.style.setProperty("--chapter-fill","var(--slider-fill)"),e.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.Gd.length>0&&nt(()=>this.Wd(),this.Ld=Wi())}Sd(t){l(this.Md)!==t&&(this.Md.set(t),this.db(),this.Xd())}Xd(){const t=this.Md();if(!t?.cues.length||this.Wa.length)return;const e=this.Yd(t.cues);this.Wa=e,this.Nd.set(e),e[0].startTime===0&&this.Id.set(0)}db(){this.Wa.length&&(this.Gd=[],this.Wa=[],this.Nd.set(this.Wa),this.Id.set(-1),this.Jd.set(-1),this.Od=0,this.Ld?.dispose())}Wd(){this.Zd(),h(this._d.bind(this)),h(this.$d.bind(this)),h(this.ae.bind(this))}be(){return this.Wa[this.Wa.length-1].endTime}Zd(){let t,e=this.be();for(let s=0;s<this.Wa.length;s++)t=this.Wa[s],this.Gd[s].style.width=q((t.endTime-t.startTime)/e*100,3)+"%"}_d(){const{liveEdge:t,ended:e}=this.g.$state;let{fillPercent:s,value:i}=this.Kd,r=t(),a=l(this.Id),o=this.Wa[a],c=r?this.Wa.length-1:this.Td(o.startTime<=l(i)?a:0,s());r||e()?this.Pd(0,this.Wa.length,"100%"):c>a?this.Pd(a,c,"100%"):c<a&&this.Pd(c+1,a+1,"0%");const u=r?"100%":this.Qd(this.Wa[c],s())+"%";this.Ud(this.Gd[c],u),this.Id.set(c)}$d(){let{pointing:t,pointerPercent:e}=this.Kd;if(!t()){this.Jd.set(-1);return}const s=this.Td(0,e());this.Jd.set(s)}Pd(t,e,s){for(let i=t;i<e;i++)this.Ud(this.Gd[i],s)}Ud(t,e){t&&t.style.setProperty("--chapter-fill",e)}Td(t,e){let s=0;for(let i=t;i<this.Wa.length;i++)if(s=this.Qd(this.Wa[i],e),s>=0&&s<100)return i;return 0}ae(){this.ce(this.de())}ee(){const{bufferedEnd:t,duration:e}=this.g.$state;return q(Math.min(t()/Math.max(e(),1),1),3)*100}Qd(t,e){const s=this.Wa[this.Wa.length-1],i=t.startTime/s.endTime*100,r=t.endTime/s.endTime*100;return Math.max(0,q(e>=r?100:(e-i)/(r-i)*100,3))}Yd(t){const e=[];t[0].startTime!==0&&e.push(new window.VTTCue(0,t[0].startTime,""));for(let s=0;s<t.length-1;s++){const i=t[s],r=t[s+1];if(e.push(i),r){const a=r.startTime-i.endTime;a>0&&e.push(new window.VTTCue(i.endTime,i.endTime+a,""))}}return e.push(t[t.length-1]),e}Vd(t){this.ud=t,this.Rd()}Rd(){if(!this.scope)return;const{disabled:t}=this.$props;if(!t())return this.Sd(this.ud),this.Hd=this.fe()?.querySelector('[data-part="chapter-title"]')||null,this.Hd&&h(this.ge.bind(this)),()=>{this.Sd(null),this.Hd&&(this.Hd.textContent="",this.Hd=null)}}ge(){const t=this.activePointerCue||this.activeCue;this.Hd&&(this.Hd.textContent=t?.text||"")}fe(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}}lt.props={disabled:!1},Wt([b],lt.prototype,"cues",1),Wt([b],lt.prototype,"activeCue",1),Wt([b],lt.prototype,"activePointerCue",1),Wt([C],lt.prototype,"setRefs",1);const A=J(),fr=["a[href]","[tabindex]","input","select","button"].map(n=>`${n}:not([aria-hidden])`).join(","),As=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class br{constructor(t){this.gf=0,this.Vi=null,this.Ui=[],this.O=t}get ug(){return this.Ui}Be(t){return d(t,"focus",this.Xh.bind(this)),this.Vi=t,T(()=>{this.Vi=null}),this}Bc(){this.Vi&&(this.Wd(),d(this.Vi,"keyup",this.Mg.bind(this)),d(this.Vi,"keydown",this.Ng.bind(this)),T(()=>{this.gf=0,this.Ui=[]}))}Wd(){this.gf=0,this.Ui=this.Zi()}Te(t=this.Yi()){const e=this.Ui[t],s=this.O.Ne();e&&s&&requestAnimationFrame(()=>{s.scrollTop=e.offsetTop-s.offsetHeight/2+e.offsetHeight/2})}Wi(t){this.gf=t,this.Ui[t]?.focus(),this.Te(t)}Yi(){return this.Ui.findIndex(t=>t.getAttribute("aria-checked")==="true")}Xh(){this.Wd(),setTimeout(()=>{const t=this.Yi();this.Wi(t>=0?t:0)},100)}Mg(t){As.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Ng(t){if(As.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.O.Oe(t);break;case"Tab":this.Wi(this.Xi(t.shiftKey?-1:1));break;case"ArrowUp":this.Wi(this.Xi(-1));break;case"ArrowDown":this.Wi(this.Xi(1));break;case"Home":case"PageUp":this.Wi(0);break;case"End":case"PageDown":this.Wi(this.Ui.length-1);break}}Xi(t){let e=this.gf;do e=(e+t+this.Ui.length)%this.Ui.length;while(this.Ui[e]?.offsetParent===null);return e}Zi(){if(!this.Vi)return[];const t=this.Vi.querySelectorAll(fr),e=[],s=i=>i.getAttribute("role")==="menu";for(const i of t)i instanceof HTMLElement&&i.offsetParent!==null&&Ge(this.Vi,i,s)&&e.push(i);return e}}var yr=Object.defineProperty,vr=Object.getOwnPropertyDescriptor,vt=(n,t,e,s)=>{for(var i=s>1?void 0:s?vr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&yr(t,e,i),i};let $r=0;class it extends m{constructor(){super(),this.he=v(!1),this.ad=v(!1),this.tc=v(null),this.uc=v(null),this.qe=v(!1),this.je=new Set,this.ke=null,this.Je=this.Ke.bind(this),this.He=this.Le.bind(this),this.Ie=this.Me.bind(this);const{showDelay:t}=this.$props;this.le=new fs({tc:this.tc,uc:this.uc,Ac:t,Bc:(e,s,i)=>{_(e,a=>{this.he()?i(a):s(a)});const r=this.ye();r&&_(r,a=>{a.stopPropagation(),i(a)})},Ma:this.ze.bind(this)})}get triggerElement(){return this.tc()}get contentElement(){return this.uc()}get isSubmenu(){return!!this.oe}onSetup(){this.g=y();const t=++$r;this.me=`media-menu-${t}`,this.ne=`media-menu-button-${t}`,this.ie=new br({Ne:this.Ae.bind(this),Oe:this.close.bind(this)}),Q(A)&&(this.oe=P(A)),this.setAttributes({"data-open":this.he,"data-submenu":this.isSubmenu,"data-disabled":this.Uc.bind(this)}),R(A,{Pe:this.tc,he:this.he,Qe:v(""),re:this.re.bind(this),se:this.se.bind(this),te:this.te.bind(this),ue:this.ue.bind(this),ve:this.ve.bind(this),pe:this.pe.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.ie.Be(t)}onConnect(t){h(this.Ce.bind(this)),this.isSubmenu&&this.oe?.pe(this),requestAnimationFrame(()=>{this.Fb()})}onDestroy(){this.tc.set(null),this.uc.set(null),this.ke=null}Ce(){const t=this.De();this.Fb(),this.we(t),t&&(h(()=>{const{height:e}=this.g.$state,s=this.uc();s&&H(s,"--player-height",e()+"px")}),this.ie.Bc(),this.listen("pointerup",this.Ee.bind(this)),d(window,"pointerup",this.Fe.bind(this)))}se(t){const e=t.el,s=this.isSubmenu,i=j(this.Uc.bind(this));$(e,"tabindex",s?"-1":"0"),$(e,"role",s?"menuitem":"button"),p(e,"id",this.ne),p(e,"aria-haspopup","menu"),p(e,"aria-expanded","false"),p(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.xe(e),h(()=>{p(e,"data-open",this.he()),p(e,"aria-disabled",i())}),this.tc.set(e),T(()=>{this.tc.set(null)})}te(t){const e=t.el;e.style.setProperty("display","none"),p(e,"id",this.me),$(e,"role","menu"),$(e,"tabindex","-1"),p(e,"data-submenu",this.isSubmenu),this.uc.set(e),T(()=>this.uc.set(null)),this.isSubmenu||this.xe(e),h(()=>{p(e,"data-open",this.he())}),this.ie.Be(e),this.we(!1),requestAnimationFrame(this.Fb.bind(this))}ue(t){this.ke=t}xe(t){d(t,"click",e=>e.stopPropagation()),d(t,"pointerup",e=>e.stopPropagation())}we(t){const e=l(this.uc);e&&p(e,"aria-hidden",Pt(!t))}ve(t){this.qe.set(t)}ze(t,e){if(e?.stopPropagation(),this.he()===t)return;if(this.Uc()){t&&this.le.hide(e);return}const s=this.tc(),i=this.uc();if(s&&(p(s,"aria-controls",t&&this.me),p(s,"aria-expanded",Pt(t))),i&&p(i,"aria-labelledby",t&&this.ne),this.he.set(t),this.Ge(e),z(),Vt(e)){t?i?.focus():s?.focus();for(const r of[this.el,i])r&&r.setAttribute("data-keyboard","")}else for(const r of[this.el,i])r&&r.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(!this.isSubmenu&&this.g.activeMenu!==this&&(this.g.activeMenu?.close(e),this.g.activeMenu=this),this.ke?.Re?.(e)):(this.isSubmenu?setTimeout(()=>{for(const r of this.je)r.close(e)},300):this.g.activeMenu=null,this.ke?.Se?.(e)),t&&!Vt(e)&&requestAnimationFrame(()=>{this.ie.Wd(),setTimeout(()=>{this.ie.Te()},100)})}De(){return!this.Uc()&&this.he()}Uc(){return this.ad()||this.qe()}re(t){this.ad.set(t)}Ee(t){t.stopPropagation()}Fe(t){if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);this.close(t)}ye(){const t=this.el.querySelector('[data-part="close-target"]');return Ge(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}Ae(){if(this.isSubmenu){let t=this.el;for(;t&&t.tagName!=="media-menu"&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}else return l(this.uc)||null}Ge(t){this.isSubmenu||(this.he()?this.g.remote.pauseControls(t):this.g.remote.resumeControls(t))}pe(t){this.je.add(t),d(t,"open",this.He),d(t,"close",this.Ie),T(this.Je)}Ke(t){this.je.delete(t)}Le(t){for(const e of this.je)if(e!==t.target)for(const s of[e.el,e.triggerElement])s?.setAttribute("aria-hidden","true");requestAnimationFrame(()=>{this.Fb()})}Me(){for(const t of this.je)for(const e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false");requestAnimationFrame(()=>{this.Fb()})}Fb(){const t=l(this.uc);if(!t)return;let{paddingTop:e,paddingBottom:s,borderTopWidth:i,borderBottomWidth:r}=getComputedStyle(t),a=parseFloat(e)+parseFloat(s)+parseFloat(i)+parseFloat(r),o=[...t.children];for(const c of o)c instanceof HTMLElement&&c.style.display==="contents"?o.push(...c.children):a+=c.offsetHeight||0;requestAnimationFrame(()=>{t&&(p(t,"data-resizing",""),setTimeout(()=>{t&&p(t,"data-resizing",!1)},400),H(t,"--menu-height",a+"px"))})}open(t){l(this.he)||(this.le.show(t),z())}close(t){l(this.he)&&(this.le.hide(t),z())}}it.props={showDelay:0},vt([b],it.prototype,"triggerElement",1),vt([b],it.prototype,"contentElement",1),vt([b],it.prototype,"isSubmenu",1),vt([C],it.prototype,"open",1),vt([C],it.prototype,"close",1);var Tr=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,kr=(n,t,e,s)=>{for(var i=s>1?void 0:s?wr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Tr(t,e,i),i};class It extends m{constructor(){super(),new K}get expanded(){return this.Ue?.he()??!1}onSetup(){this.Ue=P(A)}onAttach(t){this.Ue.se(this),h(this.Xc.bind(this)),$(t,"type","button")}onConnect(t){const e=Array.from(t.querySelectorAll('[data-part="hint"]')).pop();e&&h(()=>{const s=this.Ue.Qe();s&&(e.textContent=s)}),_(t,s=>{this.dispatch("select",{trigger:s})})}Xc(){this.Ue.ve(this.$props.disabled())}}It.props={disabled:!1},kr([b],It.prototype,"expanded",1);class xr extends It{}class Ls extends m{constructor(){super(...arguments),this.Ve=null}onSetup(){this.g=y(),R(Ft,{Dc:this.Xe.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.Ve?.remove(),this.Ve=null}Xe(t){this.We(!1),this.Ve=t,ht(()=>{ht(()=>{this.connectScope&&h(this.Xc.bind(this))})})}Xc(){const{fullscreen:t}=this.g.$state,{disabled:e}=this.$props,s=e();this.We(s==="fullscreen"?!t():!s)}We(t){if(!this.Ve)return;let e=this.Ye(this.$props.container());if(!e)return;const s=this.Ve.parentElement===e;p(this.Ve,"data-portal",t),t?s||(this.Ve.remove(),e.append(this.Ve)):s&&this.Ve.parentElement===e&&(this.Ve.remove(),this.el?.append(this.Ve))}Ye(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}}Ls.props={container:null,disabled:!1};const Ft=J();class Os extends m{constructor(){super(),new K;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.Ue=P(A),this.Ue.te(this),Q(Ft)){const e=P(Ft);e&&(R(Ft,null),e.Dc(t),T(()=>e.Dc(null)))}}onConnect(t){h(this.Ec.bind(this))}Ec(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return Ye(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}else this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.Ue.Pe()}}Os.props={placement:null,offset:0,alignOffset:0};const fe=J();class dt extends B{constructor(){super(...arguments),this._i=new Set,this.ef=v(""),this.a=null,this.cj=this.Ma.bind(this)}get Ze(){return Array.from(this._i).map(t=>t.ef())}get value(){return this.ef()}set value(t){this.Ma(t)}onSetup(){R(fe,{add:this.aj.bind(this),remove:this.bj.bind(this)})}onAttach(t){Q(A)||$(t,"role","radiogroup"),this.setAttributes({value:this.ef})}onDestroy(){this._i.clear()}aj(t){this._i.has(t)||(this._i.add(t),t.af=this.cj,t.$e(t.ef()===this.ef()))}bj(t){t.af=null,this._i.delete(t)}Ma(t,e){const s=l(this.ef);if(!t||t===s)return;const i=this.$i(s),r=this.$i(t);i?.$e(!1,e),r?.$e(!0,e),this.ef.set(t),this.od?.(t,e)}$i(t){for(const e of this._i)if(t===l(e.ef))return e;return null}}var Er=Object.defineProperty,Pr=Object.getOwnPropertyDescriptor,qs=(n,t,e,s)=>{for(var i=s>1?void 0:s?Pr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Er(t,e,i),i};class Ht extends m{constructor(){super(),this.a=new dt,this.a.od=this.od.bind(this)}get values(){return this.a.Ze}get value(){return this.a.value}set value(t){this.a.value=t}onSetup(){h(this.Wc.bind(this))}Wc(){this.a.value=this.$props.value()}od(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}}Ht.props={value:""},qs([b],Ht.prototype,"values",1),qs([b],Ht.prototype,"value",1);var Sr=Object.defineProperty,Mr=Object.getOwnPropertyDescriptor,Cr=(n,t,e,s)=>{for(var i=s>1?void 0:s?Mr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Sr(t,e,i),i};class be extends m{constructor(){super(),this._e=v(!1),this.a={ef:this.$props.value,$e:this.$e.bind(this),af:null},new K}get checked(){return this._e()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this._e,"aria-checked":j(this._e)})}onAttach(t){const e=Q(A);$(t,"tabindex",e?"-1":"0"),$(t,"role",e?"menuitemradio":"radio"),h(this.Wc.bind(this))}onConnect(t){this.bf(),_(t,this.Ic.bind(this)),T(this.cf.bind(this))}cf(){nt(()=>{P(fe).remove(this.a)},this.connectScope)}bf(){P(fe).add(this.a)}Wc(){const{value:t}=this.$props,e=t();l(this._e)&&this.a.af?.(e)}Ic(t){l(this._e)||(this.Ma(!0,t),this.df(t),this.a.af?.(l(this.$props.value),t))}$e(t,e){l(this._e)!==t&&this.Ma(t,e)}Ma(t,e){this._e.set(t),this.dispatch("change",{detail:t,trigger:e})}df(t){this.dispatch("select",{trigger:t})}}be.props={value:""},Cr([b],be.prototype,"checked",1);var Ar=Object.defineProperty,Lr=Object.getOwnPropertyDescriptor,ye=(n,t,e,s)=>{for(var i=s>1?void 0:s?Lr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Ar(t,e,i),i};class $t extends m{constructor(){super(),this.gf=v(0),this.ff=v(null),this.a=new dt,this.a.od=this.od.bind(this)}get value(){return this.a.value}get disabled(){const t=this.ff();return!t||!t.cues.length}onSetup(){this.g=y(),Q(A)&&(this.Ue=P(A));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.Ue?.ue({Re:this.Re.bind(this)})}getOptions(){const t=this.ff();return t?t.cues.map((e,s)=>({cue:e,value:s+"",label:e.text,startTime:qt(e.startTime,!1),duration:pe(e.endTime-e.startTime)})):[]}Re(){l(()=>this.Wb())}onConnect(t){h(this.Wc.bind(this)),h(this.Wb.bind(this)),h(this.hf.bind(this)),St(this.g.textTracks,"chapters",this.ff.set)}Wc(){this.a.value=this.jf()}Wb(){if(!this.Ue?.he())return;const t=this.ff();if(!t){this.gf.set(-1);return}const{currentTime:e}=this.g.$state,s=e(),i=t.cues.findIndex(r=>Yi(r,s));if(this.gf.set(i),i>=0){const r=t.cues[i],a=this.el.querySelector("[aria-checked='true']"),o=(s-r.startTime)/(r.endTime-r.startTime)*100;a&&H(a,"--progress",q(o,3)+"%")}}hf(){this.Ue?.re(this.disabled)}jf(){return this.gf()+""}od(t,e){if(this.disabled||!e)return;const s=+t,i=this.ff()?.cues;He(s)&&i?.[s]&&(this.gf.set(s),this.g.remote.seek(i[s].startTime,e),this.dispatch("change",{detail:i[s],trigger:e}))}}$t.props={thumbnails:""},ye([b],$t.prototype,"value",1),ye([b],$t.prototype,"disabled",1),ye([C],$t.prototype,"getOptions",1);var Or=Object.defineProperty,qr=Object.getOwnPropertyDescriptor,ve=(n,t,e,s)=>{for(var i=s>1?void 0:s?qr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Or(t,e,i),i};class Tt extends m{constructor(){super(),this.a=new dt,this.a.od=this.od.bind(this)}get value(){return this.a.value}get disabled(){const{audioTracks:t}=this.g.$state;return t().length===0}onSetup(){this.g=y(),Q(A)&&(this.Ue=P(A))}onConnect(t){h(this.Wc.bind(this)),h(this.hf.bind(this)),h(this.kf.bind(this))}getOptions(){const{audioTracks:t}=this.g.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}Wc(){this.a.value=this.jf()}kf(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.g.$state,s=e();this.Ue?.Qe.set(s?.label??t())}hf(){this.Ue?.re(this.disabled)}jf(){const{audioTrack:t}=this.g.$state,e=t();return e?e.label.toLowerCase():""}od(t,e){if(this.disabled)return;const s=this.g.audioTracks.toArray().findIndex(i=>i.label.toLowerCase()===t);if(s>=0){const i=this.g.audioTracks[s];this.g.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:i,trigger:e})}}}Tt.props={emptyLabel:"Default"},ve([b],Tt.prototype,"value",1),ve([b],Tt.prototype,"disabled",1),ve([C],Tt.prototype,"getOptions",1);var Dr=Object.defineProperty,Wr=Object.getOwnPropertyDescriptor,$e=(n,t,e,s)=>{for(var i=s>1?void 0:s?Wr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Dr(t,e,i),i};class wt extends m{constructor(){super(),this.a=new dt,this.a.od=this.od.bind(this)}get value(){return this.a.value}get disabled(){const{textTracks:t}=this.g.$state;return t().filter(L).length===0}onSetup(){this.g=y(),Q(A)&&(this.Ue=P(A))}onConnect(t){super.onConnect?.(t),h(this.Wc.bind(this)),h(this.hf.bind(this)),h(this.kf.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.g.$state;return[{value:"off",label:t},...e().filter(L).map(s=>({track:s,label:s.label,value:s.label.toLowerCase()}))]}Wc(){this.a.value=this.jf()}kf(){const{offLabel:t}=this.$props,{textTrack:e}=this.g.$state,s=e();this.Ue?.Qe.set(s&&L(s)&&s.mode==="showing"?s.label:t())}hf(){this.Ue?.re(this.disabled)}jf(){const{textTrack:t}=this.g.$state,e=t();return e&&L(e)&&e.mode==="showing"?e.label.toLowerCase():"off"}od(t,e){if(this.disabled)return;if(t==="off"){const i=this.g.textTracks.selected;if(i){const r=this.g.textTracks.toArray().indexOf(i);this.g.remote.changeTextTrackMode(r,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.g.textTracks.toArray().findIndex(i=>i.label.toLowerCase()===t);if(s>=0){const i=this.g.textTracks[s];this.g.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:i,trigger:e})}}}wt.props={offLabel:"Off"},$e([b],wt.prototype,"value",1),$e([b],wt.prototype,"disabled",1),$e([C],wt.prototype,"getOptions",1);var Ir=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,Ds=(n,t,e,s)=>{for(var i=s>1?void 0:s?Fr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Ir(t,e,i),i};class Nt extends m{constructor(){super(),this.a=new dt,this.a.od=this.od.bind(this)}get value(){return this.a.value}onSetup(){this.g=y(),Q(A)&&(this.Ue=P(A))}onConnect(t){h(this.Wc.bind(this)),h(this.kf.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1?e:s+"\xD7",value:s+""}))}Wc(){this.a.value=this.jf()}kf(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.g.$state,s=e();this.Ue?.Qe.set(s===1?t():s+"\xD7")}jf(){const{playbackRate:t}=this.g.$state;return t()+""}od(t,e){const s=+t;this.g.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}Nt.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]},Ds([b],Nt.prototype,"value",1),Ds([C],Nt.prototype,"getOptions",1);var Hr=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,Te=(n,t,e,s)=>{for(var i=s>1?void 0:s?Nr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&Hr(t,e,i),i};class kt extends m{constructor(){super(),this.mf=G(()=>{const{qualities:t}=this.g.$state;return[...t()].sort((e,s)=>s.height===e.height?s.bitrate-e.bitrate:s.height-e.height)}),this.a=new dt,this.a.od=this.od.bind(this)}get value(){return this.a.value}get disabled(){const{canSetQuality:t,qualities:e}=this.g.$state;return!t()||e().length===0}onSetup(){this.g=y(),Q(A)&&(this.Ue=P(A))}onConnect(t){h(this.Wc.bind(this)),h(this.hf.bind(this)),h(this.kf.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.mf().map(s=>{const i=`${q(s.bitrate/1e6,2)} Mbps`;return{quality:s,label:s.height+"p",value:this.lf(s),bitrate:()=>e()?null:i}})]}Wc(){this.a.value=this.jf()}kf(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.g.$state,i=s()?s().height+"p":"";this.Ue?.Qe.set(e()?t()+` (${i})`:i)}hf(){const{qualities:t}=this.g.$state;this.Ue?.re(t().length===0)}od(t,e){if(this.disabled)return;if(t==="auto"){this.g.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}const{qualities:s}=this.g.$state,i=l(s).findIndex(r=>this.lf(r)===t);if(i>=0){const r=l(s)[i];this.g.remote.changeQuality(i,e),this.dispatch("change",{detail:r,trigger:e})}}jf(){const{quality:t,autoQuality:e}=this.g.$state;if(e())return"auto";const s=t();return s?this.lf(s):"auto"}lf(t){return t.height+"_"+t.bitrate}}kt.props={autoLabel:"Auto",hideBitrate:!1},Te([b],kt.prototype,"value",1),Te([b],kt.prototype,"disabled",1),Te([C],kt.prototype,"getOptions",1);class Ws extends m{constructor(){super(...arguments),this.W=null,this.nf=0,this.of=-1}onSetup(){this.g=y();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.W=this.g.player.el?.querySelector("[data-media-provider]"),h(this.qf.bind(this))}qf(){let t=this.$props.event();!this.W||!t||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.g.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),d(this.W,t,this.rf.bind(this),{passive:!1}))}rf(t){if(!(Ne(t)&&(t.button!==0||this.g.activeMenu)||Et(t)&&this.g.activeMenu||Jt(t)||!this.sf(t))){if(t.MEDIA_GESTURE=!0,t.preventDefault(),!l(this.$props.event)?.startsWith("dbl"))this.nf===0&&setTimeout(()=>{this.nf===1&&this.pf(t)},250);else if(this.nf===1){queueMicrotask(()=>this.pf(t)),clearTimeout(this.of),this.nf=0;return}this.nf===0&&(this.of=window.setTimeout(()=>{this.nf=0},275)),this.nf++}}pf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.tf()&&this.uf(l(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}sf(t){if(!this.el)return!1;if(Ne(t)||Ii(t)||Et(t)){const e=Et(t)?t.changedTouches[0]??t.touches[0]:void 0,s=e?.clientX??t.clientX,i=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),a=i>=r.top&&i<=r.bottom&&s>=r.left&&s<=r.right;return t.type.includes("leave")?!a:a}return!0}tf(){const t=this.g.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((e,s)=>+getComputedStyle(s).zIndex-+getComputedStyle(e).zIndex)[0]===this.el}uf(t,e){if(!t)return;const s=new F("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[i,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.g.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.g.remote.seek(l(this.g.$state.currentTime)+(+r||0),e):this.g.remote[We(i)](e),this.dispatch("trigger",{detail:t,trigger:e})}}Ws.props={event:void 0,action:void 0};class Ur{constructor(t){this.priority=10,this.ff=null,this.T=Fi(),this.wf=t}attach(){}canRender(){return!0}detach(){this.T.empty(),this.wf.reset(),this.ff=null}changeTrack(t){!t||this.ff===t||(this.T.empty(),t.readyState<2?(this.wf.reset(),this.T.add(d(t,"load",()=>this.dj(t),{once:!0}))):this.dj(t),this.T.add(d(t,"add-cue",e=>{this.wf.addCue(e.detail)}),d(t,"remove-cue",e=>{this.wf.removeCue(e.detail)})),this.ff=t)}dj(t){this.wf.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}class Is extends m{onSetup(){this.g=y(),this.setAttributes({"aria-hidden":j(this.Lc.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){if(this.wf){h(this.xf.bind(this));return}import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(e=>{this.connectScope&&nt(()=>{this.I=e;const{CaptionsRenderer:s}=this.I;this.wf=new s(t),this.vf=new Ur(this.wf),h(this.xf.bind(this))},this.connectScope)})}onDestroy(){this.vf&&(this.vf.detach(),this.g.textRenderers.remove(this.vf)),this.wf?.destroy()}Lc(){const{textTrack:t}=this.g.$state,e=t();return this.g.$iosControls()||!e||!L(e)}xf(){const{viewType:t}=this.g.$state;return t()==="audio"?this.zf():this.Af()}zf(){return h(this.Rd.bind(this)),()=>{this.el.textContent=""}}Rd(){if(this.Lc())return;const{textTrack:t}=this.g.$state;this.yf(),d(t(),"cue-change",this.yf.bind(this)),h(this.Bf.bind(this))}yf(){this.el.textContent="";const{currentTime:t,textTrack:e}=this.g.$state,s=l(t),i=l(e).activeCues,{renderVTTCueString:r}=this.I;for(const a of i){const o=document.createElement("div");o.setAttribute("data-part","cue"),o.innerHTML=r(a,s),this.el.append(o)}}Bf(){const{currentTime:t}=this.g.$state,{updateTimedVTTCueNodes:e}=this.I;e(this.el,t())}Af(){return h(this.Cf.bind(this)),h(this.Df.bind(this)),this.g.textRenderers.add(this.vf),()=>{this.el.textContent="",this.vf.detach(),this.g.textRenderers.remove(this.vf)}}Cf(){this.wf.dir=this.$props.textDir()}Df(){if(this.Lc())return;const{currentTime:t}=this.g.$state;this.wf.currentTime=t()}}Is.props={textDir:"ltr"};class we extends m{onSetup(){this.g=y(),this.Ef(),this.Ff(),this.hd()}onAttach(t){t.style.setProperty("pointer-events","none"),h(this.Gf.bind(this)),h(this.Ef.bind(this)),h(this.Ff.bind(this)),h(this.hd.bind(this));const{started:e}=this.g.$state;this.setAttributes({"data-visible":()=>!e(),"data-loading":this.ed.bind(this),"data-error":this.dd.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){const{canLoad:e,poster:s}=this.g.$state;window.requestAnimationFrame(()=>{e()||Qt(s())}),h(this.K.bind(this))}dd(){const{error:t}=this.$state;return!mt(t())}hd(){const{src:t}=this.$props,{$iosControls:e}=this.g,{poster:s}=this.g.$state;this.el&&p(this.el,"display",e()?"none":null),this.$state.hidden.set(this.dd()||!(t()||s())||e())}ed(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}Gf(){const t=this.$state.img();t&&(d(t,"load",this.Hf.bind(this)),d(t,"error",this.p.bind(this)))}Ef(){const{src:t}=this.$props,{src:e}=this.$state,{canLoad:s,poster:i}=this.g.$state,r=t()||i();i()!==r&&this.g.delegate.f("poster-change",{detail:r}),e.set(s()&&r.length?r:null)}Ff(){const{src:t,alt:e}=this.$state;e.set(t()?this.$props.alt():null)}K(){const{loading:t,error:e}=this.$state,{canLoad:s,poster:i}=this.g.$state;t.set(s()&&!!i()),e.set(null)}Hf(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}p(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}we.props={src:void 0,alt:void 0},we.state=new Z({img:null,src:null,alt:null,loading:!0,error:null,hidden:!1});class ke extends m{onSetup(){this.g=y(),this.vb();const{type:t,remainder:e}=this.$props;this.setAttributes({"data-type":t,"data-remainder":e})}onAttach(t){h(this.vb.bind(this))}vb(){const{type:t,remainder:e,padHours:s,padMinutes:i,showHours:r}=this.$props,a=this.If(t()),o=this.g.$state.duration();if(!Number.isFinite(a+o)){this.$state.timeText.set("LIVE");return}const c=e()?Math.max(0,o-a):a,u=qt(c,s(),i(),r());this.$state.timeText.set(u)}If(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.g.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}}ke.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1},ke.state=new Z({timeText:""});var jr=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,Rr=Object.getPrototypeOf,Kr=Reflect.get,xe=(n,t,e,s)=>{for(var i=s>1?void 0:s?Vr(t,e):t,r=n.length-1,a;r>=0;r--)(a=n[r])&&(i=(s?a(t,e,i):a(i))||i);return s&&i&&jr(t,e,i),i},Fs=(n,t,e)=>Kr(Rr(n),e,t);class ut extends m{constructor(){super(...arguments),this.menuContainer=null}get isMatch(){return this.Wf.matches}get isSmallLayout(){return this.Vf.matches}onSetup(){const{when:t,smallWhen:e,thumbnails:s,translations:i,menuGroup:r,noModal:a}=this.$props;this.Wf=Mt.create(t),this.Vf=Mt.create(e),this.setAttributes({"data-match":this.Wf.$matches,"data-size":()=>this.Vf.matches?"sm":null});const o=this;R(Br,{smQueryList:this.Vf,thumbnails:s,translations:i,menuGroup:r,noModal:a,get menuContainer(){return o.menuContainer}})}}ut.props={when:"",smallWhen:"",thumbnails:"",customIcons:!1,translations:null,menuGroup:"bottom",noModal:!1},xe([b],ut.prototype,"menuContainer",2),xe([b],ut.prototype,"isMatch",1),xe([b],ut.prototype,"isSmallLayout",1);const Ee=class extends ut{};Ee.props={...Fs(Ee,Ee,"props"),when:"(view-type: audio)",smallWhen:"(width < 576)"};const Pe=class extends ut{};Pe.props={...Fs(Pe,Pe,"props"),when:"(view-type: video)",smallWhen:"(width < 576) or (height < 380)"};const Br=J();class Se extends f(HTMLElement,jn){}Se.tagName="media-player",Se.attrs={preferNativeHLS:"prefer-native-hls"};class Hs extends f(HTMLElement,re){constructor(){super(...arguments),this.lb=null}onSetup(){this.g=y(),this.setAttribute("keep-alive","")}onDestroy(){this.lb?.remove(),this.lb=null}onConnect(){h(()=>{const t=this.$state.loader(),e=t?t.mediaType()==="audio"?this.mb():this.nb():null;if(this.lb!==e){const s=this.lb?.parentElement??this;this.lb?.remove(),this.lb=e,e&&s.prepend(e)}this.load(e)})}mb(){const t=this.lb instanceof HTMLAudioElement?this.lb:document.createElement("audio");p(t,"preload","none"),p(t,"aria-hidden","true");const{controls:e,crossorigin:s}=this.g.$state;return h(()=>{p(t,"controls",e()),p(t,"crossorigin",s())}),t}nb(){const t=this.lb instanceof HTMLVideoElement?this.lb:document.createElement("video"),{controls:e,crossorigin:s,poster:i}=this.g.$state,{$iosControls:r}=this.g,a=G(()=>e()||r()?"":null),o=G(()=>i()&&(e()||r())?i():null);return h(()=>{p(t,"controls",a()),p(t,"crossorigin",s()),p(t,"poster",o())}),t}}Hs.tagName="media-provider",g(Se),g(Hs);class Ns extends f(HTMLElement,$s){}Ns.tagName="media-caption-button";class Us extends f(HTMLElement,Ts){}Us.tagName="media-fullscreen-button";class js extends f(HTMLElement,Es){}js.tagName="media-live-button";class Vs extends f(HTMLElement,ws){}Vs.tagName="media-mute-button";class Rs extends f(HTMLElement,ks){}Rs.tagName="media-pip-button";class Ks extends f(HTMLElement,vs){}Ks.tagName="media-play-button";class Bs extends f(HTMLElement,xs){}Bs.tagName="media-seek-button";class Qs extends f(HTMLElement,ae){}Qs.tagName="media-toggle-button";class Gs extends f(HTMLElement,Is){}Gs.tagName="media-captions";class Qr extends m{}class Xs extends f(HTMLElement,Qr){constructor(){super(...arguments),this.ob=v(""),this.pb=G(()=>{const{title:t,started:e}=this.g.$state;return e()&&this.ob()||t()})}onSetup(){this.g=y()}onConnect(){St(this.g.textTracks,"chapters",t=>{if(!t){this.ob.set("");return}const e=()=>{const s=t?.activeCues[0];this.ob.set(s?.text||"")};e(),d(t,"cue-change",e)}),h(()=>{this.textContent=this.pb()})}}Xs.tagName="media-chapter-title";class Ys extends f(HTMLElement,ms){}Ys.tagName="media-controls";class zs extends f(HTMLElement,Jn){}zs.tagName="media-controls-group";class Js extends f(HTMLElement,Ws){}Js.tagName="media-gesture";class Zs extends m{}Zs.props={when:""};class _s extends f(HTMLElement,Zs){onSetup(){this.query=Mt.create(this.$props.when)}onConnect(){h(this.qb.bind(this))}qb(){const t=this.firstElementChild,e=t?.localName==="template",s=t instanceof HTMLElement;if(!this.query.matches){if(e)for(const i of this.children)i.localName!=="template"&&i.remove();else s&&(t.style.display="none");return}e?this.append(t.cloneNode(!0)):s&&(t.style.display="")}}_s.tagName="media-layout";function xt(n,t){ht(()=>{if(!n.connectScope)return;const e=n.querySelector("template");e&&h(()=>{const s=n.getOptions();Xe(e,s.length,(i,r)=>{const{label:a,value:o}=s[r],c=i.querySelector('[data-part="label"]');i.setAttribute("value",o),c&&(W(a)?c.textContent=a:h(()=>{c.textContent=a()})),t?.(i,s[r],r)})})})}class ti extends f(HTMLElement,Tt){onConnect(){xt(this)}}ti.tagName="media-audio-radio-group";class ei extends f(HTMLElement,wt){onConnect(){xt(this)}}ei.tagName="media-captions-radio-group";class si extends f(HTMLElement,$t){onConnect(){xt(this,(t,e)=>{const{cue:s,startTime:i,duration:r}=e,a=t.querySelector(".vds-thumbnail,media-thumbnail"),o=t.querySelector('[data-part="start-time"]'),c=t.querySelector('[data-part="duration"]');o&&(o.textContent=i),c&&(c.textContent=r),a&&(a.setAttribute("time",s.startTime+""),h(()=>{const{thumbnails:u}=this.$props;a.setAttribute("src",u())}))})}}si.tagName="media-chapters-radio-group";class ii extends f(HTMLElement,It){}ii.tagName="media-menu-button";class ni extends f(HTMLElement,it){}ni.tagName="media-menu";class ri extends f(HTMLElement,xr){}ri.tagName="media-menu-item";class ai extends f(HTMLElement,Os){}ai.tagName="media-menu-items";class Me extends f(HTMLElement,Ls){}Me.tagName="media-menu-portal",Me.attrs={disabled:{converter(n){return W(n)?n:n!==null}}};class hi extends f(HTMLElement,kt){onConnect(){xt(this,(t,e)=>{const s=e.bitrate,i=t.querySelector('[data-part="bitrate"]');s&&i&&h(()=>{i.textContent=s()||""})})}}hi.tagName="media-quality-radio-group";class oi extends f(HTMLElement,be){}oi.tagName="media-radio";class ci extends f(HTMLElement,Ht){}ci.tagName="media-radio-group";class li extends f(HTMLElement,Nt){onConnect(){xt(this)}}li.tagName="media-speed-radio-group";class di extends f(HTMLElement,we){constructor(){super(...arguments),this.rb=document.createElement("img")}onSetup(){this.g=y(),this.$state.img.set(this.rb)}onConnect(){const{src:t,alt:e}=this.$state,{crossorigin:s}=this.g.$state;this.rb.parentNode!==this&&this.prepend(this.rb),h(()=>{p(this.rb,"src",t()),p(this.rb,"alt",e()),p(this.rb,"crossorigin",s())})}}di.tagName="media-poster";class ui extends f(HTMLElement,lt){constructor(){super(...arguments),this.sb=null}onConnect(){ht(()=>{if(!this.connectScope)return;const t=this.querySelector("template");t&&(this.sb=t,h(this.tb.bind(this)))})}tb(){if(!this.sb)return;const t=Xe(this.sb,this.cues.length||1);this.setRefs(t)}}ui.tagName="media-slider-chapters";class pi extends f(HTMLElement,st){}pi.tagName="media-slider";class gi extends f(HTMLElement,Cs){}gi.tagName="media-slider-preview";const Gr=Zt('<img loading="eager" decoding="async" aria-hidden="true">');class Ce extends f(HTMLElement,de){constructor(){super(...arguments),this.rb=this.wb()}onSetup(){this.g=y(),this.$state.img.set(this.rb)}onConnect(){const{src:t}=this.$state,{crossorigin:e}=this.g.$props;this.rb.parentNode!==this&&this.prepend(this.rb),h(()=>{p(this.rb,"src",t()),p(this.rb,"crossorigin",e())})}wb(){return _t(Gr)}}Ce.tagName="media-thumbnail";class mi extends Ce{onSetup(){super.onSetup(),this.ub=ft(st.state)}onConnect(){super.onConnect(),h(this.vb.bind(this))}vb(){const{duration:t}=this.g.$state;this.time=this.ub.pointerRate()*t()}}mi.tagName="media-slider-thumbnail";class Ae extends f(HTMLElement,ge){onConnect(){h(()=>{this.textContent=this.getValueText()})}}Ae.tagName="media-slider-value",Ae.attrs={padMinutes:{converter:Hi}};const Xr=Zt('<video muted playsinline preload="none" style="max-width: unset;"></video>');class fi extends f(HTMLElement,Ot){constructor(){super(...arguments),this.n=this.nb()}onSetup(){this.g=y(),this.$state.video.set(this.n)}onConnect(){const{crossorigin:t,canLoad:e}=this.g.$state,{src:s}=this.$state;this.n.parentNode!==this&&this.prepend(this.n),h(()=>{p(this.n,"src",s()),p(this.n,"crossorigin",t()),p(this.n,"preload",e()?"auto":"none")})}nb(){return _t(Xr)}}fi.tagName="media-slider-video";class bi extends f(HTMLElement,Dt){}bi.tagName="media-time-slider";class yi extends f(HTMLElement,me){}yi.tagName="media-volume-slider";class vi extends f(HTMLElement,ke){onConnect(){h(()=>{this.textContent=this.$state.timeText()})}}vi.tagName="media-time";class $i extends f(HTMLElement,ys){}$i.tagName="media-tooltip-content";class Ti extends f(HTMLElement,bs){}Ti.tagName="media-tooltip";class wi extends f(HTMLElement,_n){onConnect(){this.style.display="contents"}}wi.tagName="media-tooltip-trigger",g(_s),g(Ys),g(zs),g(di),g(Ns),g(Us),g(Vs),g(Rs),g(Ks),g(Bs),g(Qs),g(pi),g(yi),g(bi),g(ui),g(gi),g(Ae),g(mi),g(fi),g(ni),g(ii),g(Me),g(ai),g(ri),g(ti),g(ei),g(li),g(hi),g(si),g(ci),g(oi),g(Ti),g(wi),g($i),g(Js),g(Ce),g(Gs),g(js),g(vi),g(Xs);const Yr=Zt('<svg width="100%" height="100%" viewBox="0 0 32 32" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg"></svg>');class ki extends HTMLElement{constructor(){super(...arguments),this.yb=this.Ab(),this.zb=v(""),this.xb=v(null),this.T=[]}static get observedAttributes(){return["type"]}get type(){return this.xb()}set type(t){this.xb.set(t),t?this.setAttribute("type",t):this.removeAttribute("type")}attributeChangedCallback(t,e,s){t==="type"&&this.xb.set(s||null)}connectedCallback(){this.classList.add("vds-icon"),this.yb.parentNode!==this&&this.prepend(this.yb),this.T.push(h(this.Bb.bind(this)),h(()=>{this.yb.innerHTML=this.zb()}))}disconnectedCallback(){for(const t of this.T)t();this.T.length=0}Ab(){return _t(Yr)}Bb(){const t=this.xb();t&&Re[t]?Re[t]().then(({default:e})=>{t===l(this.xb)&&this.zb.set(e)}):this.zb.set("")}}ki.tagName="media-icon",g(ki);
